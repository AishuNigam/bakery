"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[994],{8994:function(e,t,n){n.r(t),n.d(t,{default:function(){return Pt}});var a=n(2791),i=n(586),r=n(3388),l=n(7888),s=n(1087),o=n(7689),c=n(8935),d=n(7309),u=n(184);function h(){return(0,u.jsx)(c.ZP,{status:"404",title:"404",subTitle:"Sorry, the page you visited does not exist.",extra:(0,u.jsx)(s.rU,{to:"/",children:(0,u.jsx)(d.Z,{type:"primary",children:"Back Home"})})})}var f=n(7063),p=n(1413),x=n(9439),m=n(2339),Z=n(5820),j=n(8302),g=n(649),v=n(7615),y=n(6106),b=n(914),C=n(9389),S=n(458),I=n(9998),k=n(43),w=n(1717),D=n(2622),T=n(1752),R=n(9286),U=n(7106),_=n(5671),L=n(3144),A=n(7205),F=function(){function e(){(0,_.Z)(this,e)}return(0,L.Z)(e,null,[{key:"list",value:function(e){return A.Z.get("coupon/list",{params:e})}},{key:"save",value:function(e,t){return A.Z.post("coupon/save",e,{params:t})}},{key:"delete",value:function(e){return A.Z.post("coupon/delete",{ids:e})}},{key:"details",value:function(e){return A.Z.get("coupon/details/"+e)}}]),e}();F.baseURL="";var O=function(){function e(){(0,_.Z)(this,e)}return(0,L.Z)(e,null,[{key:"listUser",value:function(e){return A.Z.get(this.baseURL+"/list-user",{params:e})}},{key:"saveUser",value:function(e){return A.Z.post(this.baseURL+"/save-user",e)}},{key:"deleteUser",value:function(e){return A.Z.post(this.baseURL+"/delete-user",{ids:e})}}]),e}();O.baseURL="user";var N=n(4099);function q(e){var t=e.qData,n=e.setQData;return(0,u.jsx)(u.Fragment,{children:t.total>0?(0,u.jsx)(N.Z,{total:t.total,showTotal:function(){var e=(t.page-1)*t.limit*1+1,n=t.page*t.limit;return(0,u.jsx)(m.Z,{children:"Showing "+e+" - "+n+" out of "+t.total})},pageSize:t.limit,current:t.page,onChange:function(e,a){t.limit!==a?n((0,p.Z)((0,p.Z)({},t),{},{page:1,limit:a})):n((0,p.Z)((0,p.Z)({},t),{},{page:e}))},showSizeChanger:!0}):null})}var P=n(2426),z=n.n(P),B=n(7027);function E(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success";e&&("success"===t&&B.ZP.success(e),"error"===t&&B.ZP.error(e),"warning"===t&&B.ZP.warning(e))}var M=n(7892),Y=n.n(M),H=n(151);function Q(){var e=(0,a.useState)([]),t=(0,x.Z)(e,2),n=t[0],i=t[1],r=(0,a.useState)(!1),l=(0,x.Z)(r,2),s=l[0],o=l[1],c=(0,a.useState)([]),h=(0,x.Z)(c,2),f=h[0],v=h[1],y=(0,a.useState)({page:1,limit:20}),b=(0,x.Z)(y,2),C=b[0],S=b[1],I=(0,a.useState)([]),k=(0,x.Z)(I,2),w=k[0],R=k[1],U=(0,a.useRef)(),_=[{title:"#",width:30,render:function(e,t,n){return(0,u.jsx)("b",{children:n+1})}},{title:"Title",dataIndex:"title"},{title:"User",dataIndex:"userDetails",width:250,render:function(e){return e.map((function(e){return(0,u.jsx)(m.Z,{children:e.name||"UNKNOWN"},e._id)}))}},{title:"Code",width:100,dataIndex:"code"},{title:"EndDate",width:100,dataIndex:"expiryDate",render:function(e,t){return(0,u.jsx)("span",{children:z()(e).format("DD MMM YYYY")})}},{title:"Discount Value",dataIndex:"discountValue",width:120,render:function(e,t){return"flat"===t.discountType?(0,u.jsxs)("b",{children:["\u20b9 ",e]}):(0,u.jsxs)("b",{children:[e," %"]})}},{title:"Coupon Use",width:100,dataIndex:"typeOfUse"},{title:"Status",dataIndex:"status",width:60,render:function(e){return e?(0,u.jsx)(m.Z,{color:"green",children:"Active"}):(0,u.jsx)(m.Z,{color:"red",children:"Inactive"})}},{title:"Action",dataIndex:"_id",width:70,render:function(e,t){return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(Z.Z,{title:"Are you sure to delete this User?",onConfirm:function(){A(t._id)},okText:"Yes",cancelText:"No",children:[(0,u.jsx)(d.Z,{type:"primary",size:"small",danger:!0,icon:(0,u.jsx)(D.Z,{})}),"\xa0"]}),(0,u.jsx)(d.Z,{type:"primary",size:"small",icon:(0,u.jsx)(T.Z,{}),onClick:function(){U.current.openForm(t._id)}})]})}}].filter((function(e){return!e.hidden}));function L(){o(!0),F.list(C).then((function(e){var t;i(null===(t=e.data)||void 0===t?void 0:t.map((function(e){return(0,p.Z)({key:e._id},e)})).reverse()),S((0,p.Z)((0,p.Z)({},C),{},{limit:e.extra.limit,page:e.extra.page,total:e.extra.total}))})).catch((function(e){})).finally((function(){o(!1)}))}var A=function(e){F.delete(e).then((function(e){E(e.message),L(),v([])})).catch((function(e){E(e.message,"error")}))},N=_.map((function(e){return(0,p.Z)((0,p.Z)({},e),{},{ellipsis:!1})}));console.log(N),N[0].fixed=!0,N[N.length-1].fixed="right";var P={bordered:!0,loading:s,size:"small",title:function(){return(0,u.jsx)(V,{addNewModalRef:U,selected:f,deleteData:A,qData:C,setQData:S,list:L})},showHeader:!0,footer:function(){return(0,u.jsx)(q,{qData:C,setQData:S})},rowSelection:{onChange:function(e){v(e)}},tableLayout:void 0};return(0,a.useEffect)((function(){L(),O.listUser().then((function(e){R(e.data||[])})).catch((function(e){E("User data not loaded","error")}))}),[C.page,C.limit]),(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(j.Z.Title,{level:5,style:{marginTop:0},children:"List of Coupon"}),(0,u.jsx)(g.Z,(0,p.Z)((0,p.Z)({},P),{},{pagination:{position:["none"],pageSize:C.limit},columns:N,dataSource:n.length?n:[],scroll:{y:"calc(100vh - 340px)",x:"calc(100vw - 387px)"}})),(0,u.jsx)(W,{ref:U,list:L,user:w})]})}function V(e){var t=e.addNewModalRef,n=e.selected,a=e.deleteData,i=e.qData,r=(e.setQData,e.list),l=function(e,t){i[t]=e,void 0!==e&&""!==e||(delete i[t],r())};return(0,u.jsx)(v.Z,{onSubmitCapture:r,className:"search-form",children:(0,u.jsxs)(y.Z,{gutter:[12,2],children:[(0,u.jsx)(b.Z,{xs:24,xl:4,children:(0,u.jsx)(v.Z.Item,{style:{marginBottom:0},children:(0,u.jsx)(C.Z,{placeholder:"Search by title or code",value:i.key,onChange:function(e){return l(e.target.value,"key")},allowClear:!0})})}),(0,u.jsx)(b.Z,{xs:24,xl:4,children:(0,u.jsx)(v.Z.Item,{children:(0,u.jsxs)(S.Z,{value:i.status,allowClear:!0,placeholder:"Search By Date",onChange:function(e){return l(e,"expiryDate")},children:[(0,u.jsx)(S.Z.Option,{value:"expired",children:"Expired"}),(0,u.jsx)(S.Z.Option,{value:"active",children:"Active"})]})})}),(0,u.jsx)(b.Z,{span:3,children:(0,u.jsx)(v.Z.Item,{style:{marginBottom:0},children:(0,u.jsx)(d.Z,{type:"primary",htmlType:"submit",children:"Search"})})}),(0,u.jsxs)(b.Z,{span:5,children:[(0,u.jsx)(v.Z.Item,{style:{marginBottom:0,float:"right"},children:(0,u.jsx)(d.Z,{type:"primary",icon:(0,u.jsx)(R.Z,{}),onClick:function(){t.current.openForm()},children:"Add New"})}),n.length?(0,u.jsx)(Z.Z,{title:"Are you sure to delete these selected images?. Be sure to delete the image from server.",onConfirm:function(){a(n)},okText:"Yes",cancelText:"No",children:(0,u.jsx)(d.Z,{type:"primary",danger:!0,style:{float:"right"},icon:(0,u.jsx)(D.Z,{}),children:"Delete Selected"})}):null]})]})})}var W=(0,a.forwardRef)((function(e,t){var n=e.list,i=e.user,r=(0,a.useState)(!1),l=(0,x.Z)(r,2),s=l[0],o=l[1],c=(0,a.useState)({aspect:1}),h=(0,x.Z)(c,2),f=h[0],m=h[1],Z=(0,a.useState)(!1),g=(0,x.Z)(Z,2),D=g[0],T=g[1],R=(0,a.useState)([]),_=(0,x.Z)(R,2),L=(_[0],_[1]),A=function(e){Object.entries(e).forEach((function(e){for(var t=f,n=e[0],a=e[1],i=n.split("."),r=0;r<i.length;r++)r+1===i.length?t[i[r]]=a:("undefined"===typeof t[i[r]]&&(1*parseInt(i[r+1])>=0?t[i[r]]=[]:t[i[r]]={}),t=t[i[r]])})),m((0,p.Z)({},f))};(0,a.useImperativeHandle)(t,(function(){return{openForm:function(e){o(!0),m(e?{_id:e}:{fileType:"photo"})}}}));var O=function(){T(!0),F.save(f).then((function(e){E(e.message),A((0,p.Z)({},e.data)),n(),o(!1)})).catch((function(e){"object"===typeof e.message?E(e.message[Object.keys(e.message)[0]],"error"):E(e.message,"error")})).finally((function(){T(!1)}))};return(0,a.useEffect)((function(){f._id&&(T(!0),F.details(f._id).then((function(e){var t,n;m(e.data||{}),L(null!==(t=e.data)&&void 0!==t&&t.avatar?[null===(n=e.data)||void 0===n?void 0:n.avatar]:[])})).catch((function(e){E(e.message,"error")})).finally((function(){T(!1)})))}),[f._id]),(0,a.useEffect)((function(){s?L([]):m({_id:null})}),[s]),(0,a.useEffect)((function(){var e;f._id||A({code:null===(e=H.Z.removeSpecialChars(f.title))||void 0===e?void 0:e.toUpperCase()})}),[f.title]),(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(I.Z,{title:(f._id?"Edit":"Add")+" Coupon",style:{top:20},open:s,okText:"Save",onOk:O,okButtonProps:{disabled:D},onCancel:function(){o(!1)},destroyOnClose:!0,maskClosable:!1,width:800,className:"app-modal-body",footer:[(0,u.jsx)(d.Z,{onClick:function(){o(!1)},children:"Cancel"},"cancel"),(0,u.jsx)(d.Z,{type:"primary",onClick:O,children:"Save"},"save")],children:(0,u.jsx)(k.Z,{spinning:D,indicator:(0,u.jsx)(U.Z,{style:{fontSize:24},spin:!0}),children:(0,u.jsx)(v.Z,{layout:"vertical",children:(0,u.jsxs)(y.Z,{gutter:[12,2],children:[(0,u.jsx)(b.Z,{span:12,children:(0,u.jsx)(v.Z.Item,{label:"Title",required:!0,children:(0,u.jsx)(C.Z,{placeholder:"Title",value:f.title,onChange:function(e){A({title:e.target.value})}})})}),(0,u.jsx)(b.Z,{span:12,children:(0,u.jsx)(v.Z.Item,{label:"Code",required:!0,children:(0,u.jsx)(C.Z,{placeholder:"Code",value:f.code,onChange:function(e){var t;A({code:null===(t=H.Z.removeSpecialChars(e.target.value))||void 0===t?void 0:t.toUpperCase()})}})})}),(0,u.jsx)(b.Z,{span:6,children:(0,u.jsx)(v.Z.Item,{label:"Discount Type",required:!0,children:(0,u.jsxs)(S.Z,{value:f.discountType,onChange:function(e){A({discountType:e})},children:[(0,u.jsx)(S.Z.Option,{value:"percent",children:"Percent"}),(0,u.jsx)(S.Z.Option,{value:"flat",children:"Flat"})]})})}),(0,u.jsx)(b.Z,{span:6,children:(0,u.jsx)(v.Z.Item,{label:"Discount Value",required:!0,children:(0,u.jsx)(C.Z,{placeholder:"discountValue",value:f.discountValue,onChange:function(e){A({discountValue:e.target.value})}})})}),(0,u.jsx)(b.Z,{span:6,children:(0,u.jsx)(v.Z.Item,{label:"Max Discount Value",required:!0,children:(0,u.jsx)(C.Z,{placeholder:"Max DiscountValue",value:f.maxDiscountValue,onChange:function(e){A({maxDiscountValue:e.target.value})}})})}),(0,u.jsx)(b.Z,{span:6,children:(0,u.jsx)(v.Z.Item,{label:"Minimun Order Value",required:!0,children:(0,u.jsx)(C.Z,{placeholder:" Minimun Order Amount",value:f.minimunOrderPrice,onChange:function(e){A({minimunOrderPrice:e.target.value})}})})}),(0,u.jsx)(b.Z,{span:6,children:(0,u.jsx)(v.Z.Item,{label:"Use Type",required:!0,children:(0,u.jsxs)(S.Z,{value:f.typeOfUse,onChange:function(e){A({typeOfUse:e})},children:[(0,u.jsx)(S.Z.Option,{value:"Single",children:"Single Use"}),(0,u.jsx)(S.Z.Option,{value:"Multiple",children:"Multiple Use"})]})})}),(0,u.jsx)(b.Z,{span:18,children:(0,u.jsx)(v.Z.Item,{label:"Choose Users (Don't choose any user if coupon is applicable to all users)",children:(0,u.jsx)(S.Z,{mode:"multiple",value:f.userIds,onChange:function(e){A({userIds:e})},options:i.map((function(e){return{value:e._id,label:(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("p",{style:{padding:"0px",margin:"0px"},children:null===e||void 0===e?void 0:e.name}),(0,u.jsx)("p",{style:{fontSize:"12px",margin:"0px"},children:(0,u.jsxs)(j.Z.Text,{type:"danger",children:["@",null===e||void 0===e?void 0:e.phone]})})]})}}))})})}),(0,u.jsx)(b.Z,{span:8,children:(0,u.jsx)(v.Z.Item,{label:"Expiry Date",required:!0,children:(0,u.jsx)(w.Z,{value:f.expiryDate&&Y()(z()(f.expiryDate).format("YYYY-MM-DD")),format:"DD MMM YYYY",disabledDate:function(e){return e.isBefore(z()(new Date).subtract(1,"day"))},onChange:function(e){A({expiryDate:new Date(e)})},style:{width:"100%"}})})}),(0,u.jsx)(b.Z,{span:8,children:(0,u.jsx)(v.Z.Item,{label:"For First Order",children:(0,u.jsxs)(S.Z,{value:f.forFirst,defaultValue:!1,onChange:function(e){A({forFirst:e})},children:[(0,u.jsx)(S.Z.Option,{value:!0,children:"Yes"}),(0,u.jsx)(S.Z.Option,{value:!1,children:"No"})]})})}),(0,u.jsx)(b.Z,{span:8,children:(0,u.jsx)(v.Z.Item,{label:"Status",required:!0,children:(0,u.jsxs)(S.Z,{value:f.status,onChange:function(e){A({status:e})},children:[(0,u.jsx)(S.Z.Option,{value:!0,children:"Active"}),(0,u.jsx)(S.Z.Option,{value:!1,children:"Inactive"})]})})})]})})})})})})),J=n(6002),K=function(){function e(){(0,_.Z)(this,e)}return(0,L.Z)(e,null,[{key:"detail",value:function(e){return console.log("service data: ",e),A.Z.get(this.baseURL+"/details/"+e.type)}},{key:"list",value:function(e){return A.Z.get(this.baseURL+"/list",{params:e})}},{key:"save",value:function(e,t){return A.Z.post(this.baseURL+"/save",e,{params:t})}},{key:"delete",value:function(e){return A.Z.post(this.baseURL+"/delete",{ids:e})}}]),e}();K.baseURL="application";var G=n(9687);function X(e){var t=e.height,n=void 0===t?400:t,i=e.menubar,r=void 0!==i&&i,l=e.plugins,s=e.toolbar,o=e.content_style,c=e.initialValue,d=e.onChange;l||(l=["advlist autolink lists link image charmap print preview anchor","searchreplace visualblocks code fullscreen","insertdatetime media table paste code help wordcount forecolor backcolor textcolor","image paste table code"]),s||(s="undo redo | formatselect | bold italic backcolor | forecolor emoticons| table tabledelete | tableprops tablerowprops tablecellprops| alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | removeformat | help | image link | imageupload | code | fullscreen"),o||(o="body { font-family:Helvetica,Arial,sans-serif; font-size:14px }");var h=(0,a.useRef)(null);return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(G.M,{onInit:function(e,t){return h.current=t},initialValue:c,init:{height:n,menubar:r,plugins:l,toolbar:s,content_style:o,file_browser_callback_types:"image",file_picker_callback:function(e,t,n){var a=document.createElement("input");a.setAttribute("type","file"),a.setAttribute("accept","image/*"),a.onchange=function(){var t=this.files[0],n=new FileReader;n.readAsDataURL(t),n.onload=function(){e(n.result,{title:t.name})}},a.click()},deprecation_warnings:!1},onSelectionChange:function(){h.current&&d(h.current.getContent())}})})}function $(){var e=(0,a.useState)({aspect:1}),t=(0,x.Z)(e,2),n=t[0],i=t[1],r=(0,a.useState)(!1),s=(0,x.Z)(r,2),o=s[0],c=s[1],h=(0,a.useState)(0),f=(0,x.Z)(h,2),m=f[0],Z=f[1],j=function(e,t){t&&(Object.entries(e).forEach((function(e){for(var t=n,a=e[0],i=e[1],r=a.split("."),l=0;l<r.length;l++)l+1===r.length?t[r[l]]=i:("undefined"===typeof t[r[l]]&&(1*parseInt(r[l+1])>=0?t[r[l]]=[]:t[r[l]]={}),t=t[r[l]])})),i((0,p.Z)({},n)))},g=function(){c(!0);try{(console.log("save",n.data),0===m?K.save((0,p.Z)((0,p.Z)({},n),{},{type:"aboutus",data:n.data})):1===m?K.save((0,p.Z)((0,p.Z)({},n),{},{type:"termcondition",data:n.data})):2===m?K.save((0,p.Z)((0,p.Z)({},n),{},{type:"faq",data:n.data})):4===m?K.save((0,p.Z)((0,p.Z)({},n),{},{type:"privacy-policy",data:n.data})):null).then((function(e){E("msg",e.message),console.log("resposne: ",e.data),j((0,p.Z)({},e.data)),Z((m+1)%5)})).catch((function(e){"object"===typeof e.message?E(e.message[Object.keys(e.message)[0]],"error"):E(e.message,"error")})).finally((function(){c(!1)}))}catch(e){E(e.message,"error")}},v=function(e){c(!0),K.detail(e).then((function(t){console.log("dara:",e),console.log("data:",t.data),i(t.data||{})})).catch((function(e){console.log(e),E(e.message,"error")})).finally((function(){c(!1)}))};return(0,a.useEffect)((function(){0===m?v({_id:n._id,type:"aboutus"}):1===m?v({_id:n._id,type:"termcondition"}):2===m?v({_id:n._id,type:"faq"}):4===m&&v({_id:n._id,type:"privacy-policy"})}),[m]),(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)(k.Z,{spinning:o,indicator:(0,u.jsx)(U.Z,{style:{fontSize:24},spin:!0}),children:[(0,u.jsx)(J.Z,{activeKey:m,type:"card",size:"small",style:{marginBottom:0},onChange:function(e){Z(e)},items:[{label:"About us",key:0,children:(0,u.jsx)(l.Z,{style:{borderTop:0},children:(0,u.jsx)(ee,{data:n,handleChange:j,save:g})})},{label:"Terms & Condition",key:1,children:(0,u.jsx)(l.Z,{style:{borderTop:0},children:(0,u.jsx)(te,{data:n,handleChange:j,save:g})})},{label:"FAQ",key:2,children:(0,u.jsx)(l.Z,{style:{borderTop:0},children:(0,u.jsx)(ne,{data:n,handleChange:j,save:g})})},{label:"Privacy Policy",key:4,children:(0,u.jsx)(l.Z,{style:{borderTop:0},children:(0,u.jsx)(ae,{data:n,handleChange:j,save:g})})}]}),(0,u.jsx)("div",{style:{display:"flex",flexDirection:"row-reverse",paddingTop:"5px",paddingRight:"70px"},children:(0,u.jsx)(d.Z,{type:"primary",onClick:g,children:4===m?"Save":"Next"},"save")})]})})}var ee=function(e){var t=e.data;e.handleChange;return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(v.Z,{layout:"vertical",children:(0,u.jsx)(y.Z,{gutter:[12,2],children:(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)(v.Z.Item,{label:"Data",required:!0,children:(0,u.jsx)(X,{initialValue:void 0===t.data?"":t.data,onChange:function(e){t.data=e}})})})})})})},te=function(e){var t=e.data;e.handleChange;return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(v.Z,{layout:"vertical",children:(0,u.jsx)(y.Z,{gutter:[12,2],children:(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)(v.Z.Item,{label:"Data",required:!0,children:(0,u.jsx)(X,{initialValue:void 0===t.data?"":t.data,onChange:function(e){t.data=e}})})})})})})},ne=function(e){var t=e.data;e.handleChange;return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(v.Z,{layout:"vertical",children:(0,u.jsx)(y.Z,{gutter:[12,2],children:(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)(v.Z.Item,{label:"Data",required:!0,children:(0,u.jsx)(X,{initialValue:void 0===t.data?"":t.data,onChange:function(e){t.data=e}})})})})})})},ae=function(e){var t=e.data;e.handleChange;return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(v.Z,{layout:"vertical",children:(0,u.jsx)(y.Z,{gutter:[12,2],children:(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)(v.Z.Item,{label:"Data",required:!0,children:(0,u.jsx)(X,{initialValue:void 0===t.data?"":t.data,onChange:function(e){t.data=e}})})})})})})},ie=n(3721),re=function(){function e(){(0,_.Z)(this,e)}return(0,L.Z)(e,null,[{key:"list",value:function(e){return A.Z.get(this.baseURL+"category/list",{params:e})}},{key:"save",value:function(e,t){return A.Z.post(this.baseURL+"category/save",e,{params:t})}},{key:"delete",value:function(e){return A.Z.post(this.baseURL+"category/delete",{ids:e})}},{key:"details",value:function(e){return A.Z.get(this.baseURL+"category/details/"+e)}}]),e}();re.baseURL="/ecommerce/";var le=n(4165),se=n(3433),oe=n(5861),ce=n(5518),de=n(5963),ue=function(){function e(){(0,_.Z)(this,e)}return(0,L.Z)(e,null,[{key:"get",value:function(e){return A.Z.get("../"+e)}},{key:"save",value:function(e,t){return A.Z.post(this.baseURL+"/save",e,t)}},{key:"remove",value:function(e){return A.Z.post(this.baseURL+"/remove",e)}}]),e}();ue.baseURL="file";var he=n(2351),fe=function(e){var t=e.fileList,n=e.setFileList,a=e.count,i=void 0===a?1:a,r=e.cropImage,l=void 0===r?null:r,s=e.disabled,o=void 0!==s&&s,c=e.listType,h=void 0===c?"picture-card":c,f=function(){var e=(0,oe.Z)((0,le.Z)().mark((function e(a){var i,r,l,s,o,c;return(0,le.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=a.onSuccess,r=a.onError,l=a.file,s=a.onProgress,o=new FormData,c={onUploadProgress:function(e){s({percent:e.loaded/e.total*100})}},o.append("file",l);try{ue.save(o,c).then((function(e){i("Ok"),n([].concat((0,se.Z)(t),[{uid:e.data.uid,url:e.data.url,name:e.data.name}]))}))}catch(d){r({err:d})}case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(e){e.file;var t=e.fl;typeof t!==typeof[]&&(t=[]),n(t)},x=function(e){ue.remove({uid:e.uid}).then((function(e){}))};return l?(typeof l!==typeof{}&&(l={}),l.aspect=l.aspect||1,l.shape=l.shape||"rect",l.quality=l.quality||1,(0,u.jsx)(de.Z,{rotate:!0,aspect:!0,shape:l.shape,quality:l.quality,children:(0,u.jsx)(ce.Z,{accept:"image/*",customRequest:f,onChange:p,onRemove:x,listType:h,fileList:t,className:"image-upload-grid",disabled:o,children:(null===t||void 0===t?void 0:t.length)>=i?null:"picture"===h?(0,u.jsx)(d.Z,{icon:(0,u.jsx)(he.Z,{}),type:"dashed",children:"Upload"}):(0,u.jsx)("div",{children:"Upload"})})})):(0,u.jsx)(ce.Z,{accept:"image/*",customRequest:f,onChange:p,onRemove:x,listType:h,fileList:t,className:"image-upload-grid",disabled:o,children:(null===t||void 0===t?void 0:t.length)>=i?null:"picture"===h?(0,u.jsx)(d.Z,{icon:(0,u.jsx)(he.Z,{}),type:"dashed",children:"Upload"}):(0,u.jsx)("div",{children:"Upload"})})};function pe(e){var t=e.parentId,n=(0,a.useState)([]),i=(0,x.Z)(n,2),r=i[0],l=i[1],s=(0,a.useState)(!1),o=(0,x.Z)(s,2),c=o[0],h=o[1],f=(0,a.useState)([]),v=(0,x.Z)(f,2),y=v[0],b=v[1],C=(0,a.useState)({page:1,limit:20,parentId:t,fileType:"photo"}),S=(0,x.Z)(C,2),I=S[0],k=S[1],w=(0,a.useRef)(),R=(0,a.useRef)(),U=[{title:"#",width:25,render:function(e,t,n){return(0,u.jsx)("b",{children:n+1})}},{title:"Name",dataIndex:"name",width:200},{title:"Image",dataIndex:"img",width:100,render:function(e){return(0,u.jsx)(ie.Z,{src:null===e||void 0===e?void 0:e.url,height:80})}},{title:"Lable",dataIndex:"lable",width:100,render:function(e,t){return(0,u.jsx)(d.Z,{onClick:function(){R.current.openForm(t)},children:" Detail"})}},{title:"Slug",dataIndex:"slug",width:100},{title:"Status",dataIndex:"status",width:80,render:function(e){return e?(0,u.jsx)(m.Z,{color:"green",children:"Active"}):(0,u.jsx)(m.Z,{color:"red",children:"Inactive"})}},{title:"Action",dataIndex:"_id",width:70,render:function(e,t){return(0,u.jsxs)(u.Fragment,{children:[t.isDeletable?(0,u.jsxs)(Z.Z,{title:"Are you sure to delete this data?",onConfirm:function(){L(t._id)},okText:"Yes",cancelText:"No",children:[(0,u.jsx)(d.Z,{type:"primary",size:"small",danger:!0,icon:(0,u.jsx)(D.Z,{})}),"\xa0"]}):null,(0,u.jsx)(d.Z,{type:"primary",size:"small",icon:(0,u.jsx)(T.Z,{}),onClick:function(){w.current.openForm(t._id)}})]})}}].filter((function(e){return!e.hidden}));function _(){h(!0),re.list(I).then((function(e){var t;l(null===(t=e.data)||void 0===t?void 0:t.map((function(e){return(0,p.Z)((0,p.Z)({},e),{},{key:e._id})}))),k((0,p.Z)((0,p.Z)({},I),{},{limit:e.extra.limit,page:e.extra.page,total:e.extra.total}))})).catch((function(e){})).finally((function(){h(!1)}))}var L=function(e){re.delete(e).then((function(e){E(e.message),_(),b([])})).catch((function(e){E(e.message,"error")}))},A=U.map((function(e){return(0,p.Z)((0,p.Z)({},e),{},{ellipsis:!1})}));A[0].fixed=!0,A[A.length-1].fixed="right";var F={bordered:!0,loading:c,size:"small",title:function(){return(0,u.jsx)(xe,{addNewModalRef:w,selected:y,deleteData:L,qData:I,setQData:k,list:_})},showHeader:!0,footer:function(){return(0,u.jsx)(q,{qData:I,setQData:k})},rowSelection:{onChange:function(e){b(e)}},tableLayout:void 0};return(0,a.useEffect)((function(){_()}),[I.page,I.limit]),(0,u.jsxs)(u.Fragment,{children:[t?null:(0,u.jsx)(j.Z.Title,{level:5,style:{marginTop:0},children:"List of Category"}),(0,u.jsx)(g.Z,(0,p.Z)((0,p.Z)({},F),{},{pagination:{position:["none"],pageSize:I.limit},columns:A,dataSource:r.length?r:[],scroll:{y:"calc(100vh - 340px)",x:"calc(100vw - 387px)"}})),(0,u.jsx)(me,{ref:w,list:_,parentId:t}),(0,u.jsx)(Ze,{ref:R})]})}function xe(e){var t=e.addNewModalRef,n=e.selected,a=e.deleteData,i=e.qData,r=e.setQData,l=e.list;return(0,u.jsx)(v.Z,{onSubmitCapture:l,className:"search-form",children:(0,u.jsxs)(y.Z,{gutter:[12,2],children:[(0,u.jsx)(b.Z,{xs:{span:24},sm:{span:16},md:{span:10},lg:{span:4},children:(0,u.jsx)(v.Z.Item,{style:{marginBottom:0},children:(0,u.jsx)(C.Z,{placeholder:"Search by name or code",value:i.key,onChange:function(e){return r((0,p.Z)((0,p.Z)({},i),{},{key:e.target.value}))},allowClear:!0})})}),(0,u.jsx)(b.Z,{span:3,children:(0,u.jsx)(v.Z.Item,{style:{marginBottom:0},children:(0,u.jsx)(d.Z,{type:"primary",htmlType:"submit",children:"Search"})})}),(0,u.jsxs)(b.Z,{span:5,children:[(0,u.jsx)(v.Z.Item,{style:{marginBottom:0,float:"right"},children:(0,u.jsx)(d.Z,{type:"primary",icon:(0,u.jsx)(R.Z,{}),onClick:function(){t.current.openForm()},children:"Add New"})}),n.length?(0,u.jsx)(Z.Z,{title:"Are you sure to delete these selected data?",onConfirm:function(){a(n)},okText:"Yes",cancelText:"No",children:(0,u.jsx)(d.Z,{type:"primary",danger:!0,style:{float:"right"},icon:(0,u.jsx)(D.Z,{}),children:"Delete Selected"})}):null]})]})})}var me=(0,a.forwardRef)((function(e,t){var n=e.list,i=e.parentId,r=(0,a.useState)(!1),l=(0,x.Z)(r,2),s=l[0],o=l[1],c=(0,a.useState)({}),h=(0,x.Z)(c,2),f=h[0],m=h[1],Z=(0,a.useState)(!1),j=(0,x.Z)(Z,2),g=j[0],w=j[1],D=(0,a.useState)([]),T=(0,x.Z)(D,2),R=T[0],_=T[1],L=function(e){m((0,p.Z)((0,p.Z)({},f),e))};(0,a.useImperativeHandle)(t,(function(){return{openForm:function(e){o(!0),console.log("dt",e),m(e?{_id:e}:{parentId:i,isTop:!1,fileType:"photo"})}}}));var A=function(){w(!0),re.save(f).then((function(e){E(e.message),L((0,p.Z)({},e.data)),n(),o(!1)})).catch((function(e){"object"===typeof e.message?E(e.message[Object.keys(e.message)[0]],"error"):E(e.message,"error")})).finally((function(){w(!1)}))};return(0,a.useEffect)((function(){f._id&&(w(!0),re.details(f._id).then((function(e){var t,n;m(e.data||{}),_(null!==(t=e.data)&&void 0!==t&&t.img?[null===(n=e.data)||void 0===n?void 0:n.img]:[])})).catch((function(e){E(e.message,"error")})).finally((function(){w(!1)})))}),[f._id]),(0,a.useEffect)((function(){s?_([]):m({_id:null})}),[s]),(0,a.useEffect)((function(){f._id||L({slug:H.Z.removeSpecialChars(f.name||"")})}),[f.name]),(0,a.useEffect)((function(){L({img:null===R||void 0===R?void 0:R[0]})}),[R]),(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(I.Z,{title:(f._id?"Edit":"Add")+" Category",style:{top:20},open:s,okText:"Save",onOk:A,okButtonProps:{disabled:g},onCancel:function(){o(!1)},destroyOnClose:!0,maskClosable:!1,width:500,className:"app-modal-body",footer:[(0,u.jsx)(d.Z,{onClick:function(){o(!1)},children:"Cancel"},"cancel"),(0,u.jsx)(d.Z,{type:"primary",onClick:A,children:"save"},"save")],children:(0,u.jsx)(k.Z,{spinning:g,indicator:(0,u.jsx)(U.Z,{style:{fontSize:24},spin:!0}),children:(0,u.jsx)(v.Z,{layout:"vertical",children:(0,u.jsxs)(y.Z,{gutter:[12,2],children:[(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)(v.Z.Item,{label:"Photo",children:(0,u.jsx)(fe,{fileList:R,setFileList:_,count:1})})}),(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)(v.Z.Item,{label:"Name",required:!0,children:(0,u.jsx)(C.Z,{value:f.name,placeholder:"Name...",onChange:function(e){L({name:e.target.value})}})})}),(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)(v.Z.Item,{label:"Slug",required:!0,children:(0,u.jsx)(C.Z,{value:f.slug,placeholder:"Slug...",onChange:function(e){L({slug:H.Z.removeSpecialChars(e.target.value)})}})})}),(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)(v.Z.Item,{label:"Specialization",required:!0,children:(0,u.jsxs)(S.Z,{value:f.specialization,onChange:function(e){L({specialization:e})},mode:"multiple",children:[(0,u.jsx)(S.Z.Option,{value:"ocassion",children:"Ocassion"}),(0,u.jsx)(S.Z.Option,{value:"flavour",children:"Flavour"}),(0,u.jsx)(S.Z.Option,{value:"recipient",children:"Recipient"}),(0,u.jsx)(S.Z.Option,{value:"relation",children:"Relation"})]})})}),(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)(v.Z.Item,{label:"Status",required:!0,children:(0,u.jsxs)(S.Z,{value:f.status,onChange:function(e){L({status:e})},children:[(0,u.jsx)(S.Z.Option,{value:!0,children:"Active"}),(0,u.jsx)(S.Z.Option,{value:!1,children:"Inactive"})]})})})]})})})})})})),Ze=(0,a.forwardRef)((function(e,t){var n=(0,a.useState)(!1),i=(0,x.Z)(n,2),r=i[0],l=i[1],s=(0,a.useState)({}),o=(0,x.Z)(s,2),c=o[0],d=o[1];return(0,a.useImperativeHandle)(t,(function(){return{openForm:function(e){l(!0),d((0,p.Z)({},e))}}})),(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(I.Z,{title:(0,u.jsxs)(u.Fragment,{children:["Data of \xa0",(0,u.jsx)("span",{style:{color:"red"},children:c.name})]}),style:{top:20},open:r,onCancel:function(){l(!1)},destroyOnClose:!0,maskClosable:!1,width:1200,className:"app-modal-body",footer:null,children:(0,u.jsx)(pe,{parentId:c._id})})})})),je=function(){function e(){(0,_.Z)(this,e)}return(0,L.Z)(e,null,[{key:"bannerDetails",value:function(e,t){return A.Z.get(this.baseURL+"/details/"+e,{params:t})}},{key:"bannerList",value:function(e){return A.Z.get(this.baseURL+"/list",{params:e})}},{key:"bannerSave",value:function(e,t){return A.Z.post(this.baseURL+"/save",e,{params:t})}},{key:"bannerDelete",value:function(e){return A.Z.post(this.baseURL+"/delete",{ids:e})}}]),e}();function ge(){var e=(0,a.useState)([]),t=(0,x.Z)(e,2),n=t[0],i=t[1],r=(0,a.useState)(!1),l=(0,x.Z)(r,2),s=l[0],o=l[1],c=(0,a.useState)([]),h=(0,x.Z)(c,2),f=h[0],m=h[1],v=(0,a.useState)({page:1,limit:20,fileType:"photo"}),y=(0,x.Z)(v,2),b=y[0],C=y[1],S=(0,a.useRef)(),I=[{title:"#",width:20,render:function(e,t,n){return(0,u.jsx)("b",{children:n+1})}},{title:"Image",dataIndex:"image",width:100,render:function(e){return(0,u.jsx)(ie.Z,{src:e,height:80})}},{title:"Uploaded At",dataIndex:"createdAt",width:100,render:function(e){return z()(e).format("dddd, MMMM Do YYYY, h:mm:ss a")}},{title:"Action",dataIndex:"_id",width:70,render:function(e,t){return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(Z.Z,{title:"Are you sure to delete this image?. Be sure to delete the image from server.",onConfirm:function(){w(t._id)},okText:"Yes",cancelText:"No",children:[(0,u.jsx)(d.Z,{type:"primary",size:"small",danger:!0,icon:(0,u.jsx)(D.Z,{})}),"\xa0"]}),(0,u.jsx)(d.Z,{type:"primary",size:"small",icon:(0,u.jsx)(T.Z,{}),onClick:function(){S.current.openForm(t._id)}})]})}}].filter((function(e){return!e.hidden}));function k(){o(!0),je.bannerList(b).then((function(e){var t;i(null===(t=e.data)||void 0===t?void 0:t.map((function(e){return(0,p.Z)((0,p.Z)({},e),{},{key:e._id})}))),C((0,p.Z)((0,p.Z)({},b),{},{limit:e.extra.limit,page:e.extra.page,total:e.extra.total}))})).catch((function(e){})).finally((function(){o(!1)}))}var w=function(e){je.bannerDelete(e).then((function(e){E(e.message),k(),m([])})).catch((function(e){E(e.message,"error")}))},R=I.map((function(e){return(0,p.Z)((0,p.Z)({},e),{},{ellipsis:!1})}));R[0].fixed=!0,R[R.length-1].fixed="right";var U={bordered:!0,loading:s,size:"small",title:function(){return(0,u.jsx)(ve,{addNewModalRef:S,selected:f,deleteData:w,qData:b,setQData:C,list:k})},showHeader:!0,footer:function(){return(0,u.jsx)(q,{qData:b,setQData:C})},rowSelection:{onChange:function(e){m(e)}},tableLayout:void 0};return(0,a.useEffect)((function(){k()}),[b.page,b.limit]),(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(j.Z.Title,{level:5,children:"List of Banners"}),(0,u.jsx)(g.Z,(0,p.Z)((0,p.Z)({},U),{},{pagination:{position:["none"],pageSize:b.limit},columns:R,dataSource:n.length?n:[],scroll:{y:"calc(100vh - 340px)",x:"calc(100vw - 387px)"}})),(0,u.jsx)(ye,{ref:S,list:k})]})}function ve(e){var t=e.addNewModalRef,n=e.selected,a=e.deleteData,i=(e.qData,e.setQData,e.list);return(0,u.jsx)(v.Z,{onSubmitCapture:i,className:"search-form",children:(0,u.jsxs)(y.Z,{gutter:[12,2],children:[(0,u.jsx)(b.Z,{span:4,children:(0,u.jsx)(v.Z.Item,{style:{marginBottom:0}})}),(0,u.jsxs)(b.Z,{span:5,children:[(0,u.jsx)(v.Z.Item,{style:{marginBottom:0,float:"right"},children:(0,u.jsx)(d.Z,{type:"primary",icon:(0,u.jsx)(R.Z,{}),onClick:function(){t.current.openForm()},children:"Add New"})}),n.length?(0,u.jsx)(Z.Z,{title:"Are you sure to delete these selected images?. Be sure to delete the image from server.",onConfirm:function(){a(n)},okText:"Yes",cancelText:"No",children:(0,u.jsx)(d.Z,{type:"primary",danger:!0,style:{float:"right"},icon:(0,u.jsx)(D.Z,{}),children:"Delete Selected"})}):null]})]})})}je.baseURL="banner";var ye=(0,a.forwardRef)((function(e,t){var n=e.list,i=(0,a.useState)(!1),r=(0,x.Z)(i,2),l=r[0],s=r[1],o=(0,a.useState)({aspect:1}),c=(0,x.Z)(o,2),h=c[0],f=c[1],m=(0,a.useState)(!1),Z=(0,x.Z)(m,2),j=Z[0],g=Z[1],C=(0,a.useState)([]),S=(0,x.Z)(C,2),w=S[0],D=S[1],T=function(e){Object.entries(e).forEach((function(e){for(var t=h,n=e[0],a=e[1],i=n.split("."),r=0;r<i.length;r++)r+1===i.length?t[i[r]]=a:("undefined"===typeof t[i[r]]&&(1*parseInt(i[r+1])>=0?t[i[r]]=[]:t[i[r]]={}),t=t[i[r]])})),f((0,p.Z)({},h))};(0,a.useImperativeHandle)(t,(function(){return{openForm:function(e){s(!0),f(e?{_id:e}:{fileType:"photo"})}}}));var R=function(){g(!0),je.bannerSave(h).then((function(e){E(e.message),T((0,p.Z)({},e.data)),n()})).catch((function(e){"object"===typeof e.message?E(e.message[Object.keys(e.message)[0]],"error"):E(e.message,"error")})).finally((function(){g(!1)}))};return(0,a.useEffect)((function(){h._id&&(g(!0),je.bannerDetails(h._id).then((function(e){var t,n;f(e.data||{}),D(null!==(t=e.data)&&void 0!==t&&t.image?[null===(n=e.data)||void 0===n?void 0:n.image]:[])})).catch((function(e){E(e.message,"error")})).finally((function(){g(!1)})))}),[h._id]),(0,a.useEffect)((function(){l?D([]):f({_id:null})}),[l]),(0,a.useEffect)((function(){T({image:null===w||void 0===w?void 0:w[0]})}),[w]),(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(I.Z,{title:(h._id?"Edit":"Add")+" Banner",style:{top:20},open:l,okText:"Save",onOk:R,okButtonProps:{disabled:j},onCancel:function(){s(!1)},destroyOnClose:!0,maskClosable:!1,width:500,footer:[(0,u.jsx)(d.Z,{onClick:function(){s(!1)},children:"Cancel"},"cancel"),(0,u.jsx)(d.Z,{type:"primary",onClick:R,children:"Save"},"save")],children:(0,u.jsx)(k.Z,{spinning:j,indicator:(0,u.jsx)(U.Z,{style:{fontSize:24},spin:!0}),children:(0,u.jsx)(v.Z,{layout:"vertical",children:(0,u.jsx)(y.Z,{gutter:[12,2],children:(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)(v.Z.Item,{label:"Photo",children:(0,u.jsx)(fe,{fileList:w,setFileList:D,count:1})})})})})})})})})),be=function(){function e(){(0,_.Z)(this,e)}return(0,L.Z)(e,null,[{key:"detailUser",value:function(e,t){return A.Z.get(this.baseURL+"details/"+e,{params:t})}},{key:"listUser",value:function(e){return A.Z.get(this.baseURL+"list",{params:e})}},{key:"saveUser",value:function(e,t){return A.Z.post(this.baseURL+"save",e,{params:t})}},{key:"deleteUser",value:function(e){return A.Z.post(this.baseURL+"delete",{ids:e})}}]),e}();function Ce(e){var t=e.productId,n=(0,a.useState)([]),i=(0,x.Z)(n,2),r=i[0],l=i[1],s=(0,a.useState)(!1),o=(0,x.Z)(s,2),c=o[0],h=o[1],f=(0,a.useState)([]),m=(0,x.Z)(f,2),v=m[0],y=m[1],b=(0,a.useState)({page:1,limit:20,productId:t}),C=(0,x.Z)(b,2),S=C[0],I=C[1],k=(0,a.useRef)(),w=(0,a.useRef)(),R=[{title:"#",width:40,render:function(e,t,n){return(0,u.jsx)("b",{children:n+1})}},{title:"Slug",dataIndex:"slug",width:100},{title:"Category",dataIndex:"cateId",width:100},{title:"Color",dataIndex:"color",width:100},{title:"Inventory",dataIndex:"inventory",width:100},{title:"Strile",dataIndex:"strile",width:100},{title:"Total",dataIndex:"total",width:100},{title:"Unit",dataIndex:"unite",width:100},{title:"Volume",dataIndex:"volume"},{title:"Price",dataIndex:"price",width:100},{title:"Kilo-Gram",dataIndex:"kg",width:100},{title:"Action",dataIndex:"_id",width:70,render:function(e,t){return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(Z.Z,{title:"Are you sure to delete this data?",onConfirm:function(){_(t._id)},okText:"Yes",cancelText:"No",children:[(0,u.jsx)(d.Z,{type:"primary",size:"small",danger:!0,icon:(0,u.jsx)(D.Z,{})}),"\xa0"]}),(0,u.jsx)(d.Z,{type:"primary",size:"small",icon:(0,u.jsx)(T.Z,{}),onClick:function(){k.current.openForm(t._id)}})]})}}].filter((function(e){return!e.hidden}));function U(){h(!0),be.listUser(S).then((function(e){var t;l(null===(t=e.data)||void 0===t?void 0:t.map((function(e){return(0,p.Z)((0,p.Z)({},e),{},{key:e._id})}))),I((0,p.Z)((0,p.Z)({},S),{},{limit:e.extra.limit,page:e.extra.page,total:e.extra.total}))})).catch((function(e){})).finally((function(){h(!1)}))}var _=function(e){be.deleteUser(e).then((function(e){E(e.message),U(),y([])})).catch((function(e){E(e.message,"error")}))},L=R.map((function(e){return(0,p.Z)((0,p.Z)({},e),{},{ellipsis:!1})}));L[0].fixed=!0,L[L.length-1].fixed="right";var A={bordered:!0,loading:c,size:"small",title:function(){return(0,u.jsx)(Se,{addNewModalRef:k,selected:v,deleteData:_,qData:S,setQData:I,list:U})},showHeader:!0,footer:function(){return(0,u.jsx)(q,{qData:S,setQData:I})},rowSelection:{onChange:function(e){y(e)}},tableLayout:void 0};return(0,a.useEffect)((function(){U()}),[S.page,S.limit]),(0,u.jsxs)(u.Fragment,{children:[t?null:(0,u.jsx)(j.Z.Title,{level:5,style:{marginTop:0},children:"List of Varient"}),(0,u.jsx)(g.Z,(0,p.Z)((0,p.Z)({},A),{},{pagination:{position:["none"],pageSize:S.limit},columns:L,dataSource:r.length?r:[],scroll:{y:"calc(100vh - 340px)",x:"calc(100vw - 387px)"}})),(0,u.jsx)(Ie,{ref:k,list:U,productId:t}),(0,u.jsx)(ke,{ref:w,list:U})]})}function Se(e){var t=e.addNewModalRef,n=e.selected,a=e.deleteData,i=e.qData,r=e.setQData,l=e.list;return(0,u.jsx)(v.Z,{onSubmitCapture:l,className:"search-form",children:(0,u.jsxs)(y.Z,{gutter:[12,2],children:[(0,u.jsx)(b.Z,{span:4,children:(0,u.jsx)(v.Z.Item,{style:{marginBottom:0},children:(0,u.jsx)(C.Z,{placeholder:"Search by name or code",value:i.key,onChange:function(e){return r((0,p.Z)((0,p.Z)({},i),{},{key:e.target.value}))},allowClear:!0})})}),(0,u.jsx)(b.Z,{span:3,children:(0,u.jsx)(v.Z.Item,{style:{marginBottom:0},children:(0,u.jsx)(d.Z,{type:"primary",htmlType:"submit",children:"Search"})})}),(0,u.jsxs)(b.Z,{span:5,children:[(0,u.jsx)(v.Z.Item,{style:{marginBottom:0,float:"right"},children:(0,u.jsx)(d.Z,{type:"primary",icon:(0,u.jsx)(R.Z,{}),onClick:function(){t.current.openForm()},children:"Add New"})}),n.length?(0,u.jsx)(Z.Z,{title:"Are you sure to delete these selected data ?",onConfirm:function(){a(n)},okText:"Yes",cancelText:"No",children:(0,u.jsx)(d.Z,{type:"primary",danger:!0,style:{float:"right"},icon:(0,u.jsx)(D.Z,{}),children:"Delete Selected"})}):null]})]})})}be.baseURL="ecommerce/variant/";var Ie=(0,a.forwardRef)((function(e,t){var n=e.list,i=e.productId,r=(0,a.useState)(!1),l=(0,x.Z)(r,2),s=l[0],o=l[1],c=(0,a.useState)({aspect:1}),h=(0,x.Z)(c,2),f=h[0],m=h[1],Z=(0,a.useState)(!1),j=(0,x.Z)(Z,2),g=j[0],S=j[1],w=function(e){m((0,p.Z)((0,p.Z)({},f),e))};(0,a.useImperativeHandle)(t,(function(){return{openForm:function(e){o(!0),m(e?{_id:e}:{productId:i})}}}));var D=function(){S(!0),be.saveUser(f).then((function(e){E(e.message),w((0,p.Z)({},e.data)),n(),o(!1)})).catch((function(e){"object"===typeof e.message?E(e.message[Object.keys(e.message)[0]],"error"):E(e.message,"error")})).finally((function(){S(!1)}))};return(0,a.useEffect)((function(){f._id&&(S(!0),be.detailUser(f._id).then((function(e){m(e.data||{})})).catch((function(e){E(e.message,"error")})).finally((function(){S(!1)})))}),[f._id]),(0,a.useEffect)((function(){s||m({_id:null})}),[s]),(0,a.useEffect)((function(){f._id||w({slug:H.Z.removeSpecialChars(f.name||"")})}),[f.name]),(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(I.Z,{title:(f._id?"Edit":"Add")+" Varient",style:{top:20},open:s,okText:"Save",onOk:D,okButtonProps:{disabled:g},onCancel:function(){o(!1)},destroyOnClose:!0,maskClosable:!1,width:500,className:"app-modal-body",footer:[(0,u.jsx)(d.Z,{onClick:function(){o(!1)},children:"Cancel"},"cancel"),(0,u.jsx)(d.Z,{type:"primary",onClick:D,children:"Save"},"save")],children:(0,u.jsx)(k.Z,{spinning:g,indicator:(0,u.jsx)(U.Z,{style:{fontSize:24},spin:!0}),children:(0,u.jsx)(v.Z,{layout:"vertical",children:(0,u.jsxs)(y.Z,{gutter:[12,2],children:[(0,u.jsxs)(b.Z,{span:24,children:[(0,u.jsx)(v.Z.Item,{label:"Category",required:!0,children:(0,u.jsx)(C.Z,{placeholder:"Category",value:f.cateId,onChange:function(e){w({cateId:e.target.value})}})}),(0,u.jsx)(v.Z.Item,{label:"Price",required:!0,children:(0,u.jsx)(C.Z,{placeholder:"price",value:f.price,onChange:function(e){w({price:e.target.value})}})})]}),(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)(v.Z.Item,{label:"Slug",required:!0,children:(0,u.jsx)(C.Z,{placeholder:"Slug",value:f.slug,onChange:function(e){w({slug:H.Z.removeSpecialChars(e.target.value)})}})})}),(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)(v.Z.Item,{label:"Color",required:!0,children:(0,u.jsx)(C.Z,{placeholder:"Color",value:f.color,onChange:function(e){w({color:e.target.value})}})})}),(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)(v.Z.Item,{label:"Kilo-Gram",required:!0,children:(0,u.jsx)(C.Z,{placeholder:"Kilo-Gram",value:f.kg,onChange:function(e){w({kg:e.target.value})}})})})]})})})})})})),ke=(0,a.forwardRef)((function(e,t){var n=(0,a.useState)(!1),i=(0,x.Z)(n,2),r=i[0],l=i[1],s=(0,a.useState)({aspect:1}),o=(0,x.Z)(s,2),c=o[0],d=o[1];return(0,a.useImperativeHandle)(t,(function(){return{openForm:function(e){l(!0),d((0,p.Z)({},e))}}})),(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(I.Z,{title:c._id?"List of Varient":"Add User",style:{top:20},open:r,okText:"Save",onCancel:function(){l(!1)},destroyOnClose:!0,maskClosable:!1,width:1200,className:"app-modal-body",children:(0,u.jsx)(Ce,{productId:c._id})})})})),we=function(){function e(){(0,_.Z)(this,e)}return(0,L.Z)(e,null,[{key:"detailUser",value:function(e,t){return A.Z.get(this.baseURL+"/details-user/"+e,{params:t})}},{key:"listUser",value:function(e){return A.Z.get(this.baseURL+"/list-user",{params:e})}},{key:"saveUser",value:function(e,t){return A.Z.post(this.baseURL+"/save-user",e,{params:t})}},{key:"deleteUser",value:function(e){return A.Z.post(this.baseURL+"/delete-user",{ids:e})}}]),e}();we.baseURL="user";var De=function(){function e(){(0,_.Z)(this,e)}return(0,L.Z)(e,null,[{key:"detailJob",value:function(e,t){return A.Z.get(this.baseURL+"/address/details"+e,{params:t})}},{key:"listJob",value:function(e){return A.Z.get(this.baseURL+"/address/list",{params:e})}},{key:"saveJob",value:function(e,t){return A.Z.post(this.baseURL+"/address/save",e,{params:t})}},{key:"deleteJob",value:function(e){return A.Z.post(this.baseURL+"/address/delete",{ids:e})}}]),e}();function Te(e){var t=e.userId,n=(0,a.useState)([]),i=(0,x.Z)(n,2),r=i[0],l=i[1],s=(0,a.useState)(!1),o=(0,x.Z)(s,2),c=o[0],h=o[1],f=(0,a.useState)([]),m=(0,x.Z)(f,2),v=m[0],y=m[1],b=(0,a.useState)({page:1,limit:20,userId:t}),C=(0,x.Z)(b,2),S=C[0],I=C[1],k=(0,a.useRef)(),w=(0,a.useRef)(),R=[{title:"#",width:40,render:function(e,t,n){return(0,u.jsx)("b",{children:n+1})}},{title:"City",dataIndex:"city"},{title:"Pin",dataIndex:"pin"},{title:"State",dataIndex:"state"},{title:"Street 1",dataIndex:"street1"},{title:"Street 2",dataIndex:"street2"},{title:"Action",dataIndex:"_id",width:70,render:function(e,t){return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(Z.Z,{title:"Are you sure to delete this data?",onConfirm:function(){_(t._id)},okText:"Yes",cancelText:"No",children:[(0,u.jsx)(d.Z,{type:"primary",size:"small",danger:!0,icon:(0,u.jsx)(D.Z,{})}),"\xa0"]}),(0,u.jsx)(d.Z,{type:"primary",size:"small",icon:(0,u.jsx)(T.Z,{}),onClick:function(){k.current.openForm(t)}})]})}}].filter((function(e){return!e.hidden}));function U(){h(!0),De.listJob(S).then((function(e){var t;l(null===(t=e.data)||void 0===t?void 0:t.map((function(e){return(0,p.Z)((0,p.Z)({},e),{},{key:e._id})}))),I((0,p.Z)((0,p.Z)({},S),{},{limit:e.extra.limit,page:e.extra.page,total:e.extra.total}))})).catch((function(e){})).finally((function(){h(!1)}))}var _=function(e){De.deleteJob(e).then((function(e){E(e.message),U(),y([])})).catch((function(e){E(e.message,"error")}))},L=R.map((function(e){return(0,p.Z)((0,p.Z)({},e),{},{ellipsis:!1})}));L[0].fixed=!0,L[L.length-1].fixed="right";var A={bordered:!0,loading:c,size:"small",title:function(){return(0,u.jsx)(Re,{addNewModalRef:k,selected:v,deleteData:_,qData:S,setQData:I,list:U})},showHeader:!0,footer:function(){return(0,u.jsx)(q,{qData:S,setQData:I})},rowSelection:{onChange:function(e){y(e)}},tableLayout:void 0};return(0,a.useEffect)((function(){U()}),[S.page,S.limit]),(0,u.jsxs)(u.Fragment,{children:[t?null:(0,u.jsx)(j.Z.Title,{level:5,style:{marginTop:0},children:"List of Users"}),(0,u.jsx)(g.Z,(0,p.Z)((0,p.Z)({},A),{},{pagination:{position:["none"],pageSize:S.limit},columns:L,dataSource:r.length?r:[],scroll:{y:"calc(100vh - 340px)",x:"calc(100vw - 387px)"}})),(0,u.jsx)(Ue,{ref:k,list:U,userId:t}),(0,u.jsx)(_e,{ref:w,list:U})]})}function Re(e){var t=e.addNewModalRef,n=e.selected,a=e.deleteData,i=e.qData,r=e.setQData,l=e.list;return(0,u.jsx)(v.Z,{onSubmitCapture:l,className:"search-form",children:(0,u.jsxs)(y.Z,{gutter:[12,2],children:[(0,u.jsx)(b.Z,{span:4,children:(0,u.jsx)(v.Z.Item,{style:{marginBottom:0},children:(0,u.jsx)(C.Z,{placeholder:"Search by name or code",value:i.key,onChange:function(e){return r((0,p.Z)((0,p.Z)({},i),{},{key:e.target.value}))},allowClear:!0})})}),(0,u.jsx)(b.Z,{span:3,children:(0,u.jsx)(v.Z.Item,{style:{marginBottom:0},children:(0,u.jsx)(d.Z,{type:"primary",htmlType:"submit",children:"Search"})})}),(0,u.jsxs)(b.Z,{span:5,children:[(0,u.jsx)(v.Z.Item,{style:{marginBottom:0,float:"right"},children:(0,u.jsx)(d.Z,{type:"primary",icon:(0,u.jsx)(R.Z,{}),onClick:function(){t.current.openForm()},children:"Add New"})}),n.length?(0,u.jsx)(Z.Z,{title:"Are you sure to delete these selected datas?",onConfirm:function(){a(n)},okText:"Yes",cancelText:"No",children:(0,u.jsx)(d.Z,{type:"primary",danger:!0,style:{float:"right"},icon:(0,u.jsx)(D.Z,{}),children:"Delete Selected"})}):null]})]})})}De.baseURL="user";var Ue=(0,a.forwardRef)((function(e,t){var n=e.list,i=e.userId,r=(0,a.useState)(!1),l=(0,x.Z)(r,2),s=l[0],o=l[1],c=(0,a.useState)({}),h=(0,x.Z)(c,2),f=h[0],m=h[1],Z=(0,a.useState)(!1),j=(0,x.Z)(Z,2),g=j[0],S=j[1],w=function(e){m((0,p.Z)((0,p.Z)({},f),e))};(0,a.useImperativeHandle)(t,(function(){return{openForm:function(e){o(!0),console.log("dt",e),m(e?(0,p.Z)({},e):{userId:i})}}}));var D=function(){S(!0),De.saveJob(f).then((function(e){E(e.message),w((0,p.Z)({},e.data)),n(),o(!1)})).catch((function(e){"object"===typeof e.message?E(e.message[Object.keys(e.message)[0]],"error"):E(e.message,"error")})).finally((function(){S(!1)}))};return(0,a.useEffect)((function(){s||m({_id:null})}),[s]),(0,a.useEffect)((function(){f._id||w({slug:H.Z.removeSpecialChars(f.name||"")})}),[f.name]),(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(I.Z,{title:(f._id?"Edit":"Add")+" User",style:{top:20},open:s,okText:"Save",onOk:D,okButtonProps:{disabled:g},onCancel:function(){o(!1)},destroyOnClose:!0,maskClosable:!1,width:500,className:"app-modal-body",footer:[(0,u.jsx)(d.Z,{onClick:function(){o(!1)},children:"Cancel"},"cancel"),(0,u.jsx)(d.Z,{type:"primary",onClick:D,children:"save"},"save")],children:(0,u.jsx)(k.Z,{spinning:g,indicator:(0,u.jsx)(U.Z,{style:{fontSize:24},spin:!0}),children:(0,u.jsx)(v.Z,{layout:"vertical",children:(0,u.jsxs)(y.Z,{gutter:[12,2],children:[(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)(v.Z.Item,{label:"City",required:!0,children:(0,u.jsx)(C.Z,{placeholder:"City",value:f.city,onChange:function(e){w({city:e.target.value})}})})}),(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)(v.Z.Item,{label:"Pin",required:!0,children:(0,u.jsx)(C.Z,{placeholder:"Pin",value:f.pin,onChange:function(e){w({pin:e.target.value})}})})}),(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)(v.Z.Item,{label:"State",required:!0,children:(0,u.jsx)(C.Z,{placeholder:"State",value:f.state,onChange:function(e){w({state:e.target.value})}})})}),(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)(v.Z.Item,{label:"Street 1",required:!0,children:(0,u.jsx)(C.Z,{placeholder:"Street 1",value:f.street1,onChange:function(e){w({street1:e.target.value})}})})}),(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)(v.Z.Item,{label:"Street 2",required:!0,children:(0,u.jsx)(C.Z,{placeholder:"Street 2",value:f.street2,onChange:function(e){w({street2:e.target.value})}})})})]})})})})})})),_e=(0,a.forwardRef)((function(e,t){var n=(0,a.useState)(!1),i=(0,x.Z)(n,2),r=i[0],l=i[1],s=(0,a.useState)({aspect:1}),o=(0,x.Z)(s,2),c=o[0],d=o[1];return(0,a.useImperativeHandle)(t,(function(){return{openForm:function(e){l(!0),d((0,p.Z)({},e))}}})),(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(I.Z,{title:c._id?"List of Varient":"Add User",style:{top:20},open:r,okText:"Save",onCancel:function(){l(!1)},destroyOnClose:!0,maskClosable:!1,width:1200,className:"app-modal-body",children:(0,u.jsx)(Te,{productId:c._id})})})})),Le=function(){function e(){(0,_.Z)(this,e)}return(0,L.Z)(e,null,[{key:"detailProduct",value:function(e,t){return A.Z.get(this.baseURL+"details/"+e,{params:t})}},{key:"listProduct",value:function(e){return A.Z.get(this.baseURL+"list",{params:e})}},{key:"saveProduct",value:function(e,t){return A.Z.post(this.baseURL+"save",e,{params:t})}},{key:"saveAddOnProduct",value:function(e,t){return A.Z.post(this.baseURL+"save-addon",e,{params:t})}},{key:"detailUser",value:function(e,t){return A.Z.get(this.baseURL+"details/"+e,{params:t})}},{key:"listUser",value:function(e){return A.Z.get(this.baseURL+"list",{params:e})}},{key:"saveUser",value:function(e,t){return A.Z.post(this.baseURL+"save",e,{params:t})}},{key:"deleteUser",value:function(e){return A.Z.post(this.baseURL+"delete",{ids:e})}}]),e}();function Ae(e){var t=e.userId,n=(0,a.useState)([]),i=(0,x.Z)(n,2),r=i[0],l=i[1],s=(0,a.useState)(!1),o=(0,x.Z)(s,2),c=o[0],h=o[1],f=(0,a.useState)([]),m=(0,x.Z)(f,2),v=m[0],y=m[1],b=(0,a.useState)({page:1,limit:20,userId:t}),C=(0,x.Z)(b,2),S=C[0],I=C[1],k=(0,a.useRef)(),w=(0,a.useRef)(),R=[{title:"#",width:40,render:function(e,t,n){return(0,u.jsx)("b",{children:n+1})}},{title:"Product Name",dataIndex:"name"},{title:"Action",dataIndex:"_id",width:70,render:function(e,t){return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(Z.Z,{title:"Are you sure to delete this data?",onConfirm:function(){_(t._id)},okText:"Yes",cancelText:"No",children:[(0,u.jsx)(d.Z,{type:"primary",size:"small",danger:!0,icon:(0,u.jsx)(D.Z,{})}),"\xa0"]}),(0,u.jsx)(d.Z,{type:"primary",size:"small",icon:(0,u.jsx)(T.Z,{}),onClick:function(){k.current.openForm(t)}})]})}}].filter((function(e){return!e.hidden}));function U(){h(!0),Le.listProduct(S).then((function(e){var t;l(null===(t=e.data)||void 0===t?void 0:t.map((function(e){return(0,p.Z)((0,p.Z)({},e),{},{key:e._id})}))),I((0,p.Z)((0,p.Z)({},S),{},{limit:e.extra.limit,page:e.extra.page,total:e.extra.total}))})).catch((function(e){})).finally((function(){h(!1)}))}var _=function(e){Le.deleteJob(e).then((function(e){E(e.message),U(),y([])})).catch((function(e){E(e.message,"error")}))},L=R.map((function(e){return(0,p.Z)((0,p.Z)({},e),{},{ellipsis:!1})}));L[0].fixed=!0,L[L.length-1].fixed="right";var A={bordered:!0,loading:c,size:"small",title:function(){return(0,u.jsx)(Fe,{addNewModalRef:k,selected:v,deleteData:_,qData:S,setQData:I,list:U})},showHeader:!0,footer:function(){return(0,u.jsx)(q,{qData:S,setQData:I})},rowSelection:{onChange:function(e){y(e)}},tableLayout:void 0};return(0,a.useEffect)((function(){U()}),[S.page,S.limit]),(0,u.jsxs)(u.Fragment,{children:[t?null:(0,u.jsx)(j.Z.Title,{level:5,style:{marginTop:0},children:"List of Users"}),(0,u.jsx)(g.Z,(0,p.Z)((0,p.Z)({},A),{},{pagination:{position:["none"],pageSize:S.limit},columns:L,dataSource:r.length?r:[],scroll:{y:"calc(100vh - 340px)",x:"calc(100vw - 387px)"}})),(0,u.jsx)(Oe,{ref:k,list:U,userId:t}),(0,u.jsx)(Ne,{ref:w,list:U})]})}function Fe(e){var t=e.addNewModalRef,n=e.selected,a=e.deleteData,i=e.qData,r=e.setQData,l=e.list;return(0,u.jsx)(v.Z,{onSubmitCapture:l,className:"search-form",children:(0,u.jsxs)(y.Z,{gutter:[12,2],children:[(0,u.jsx)(b.Z,{span:4,children:(0,u.jsx)(v.Z.Item,{style:{marginBottom:0},children:(0,u.jsx)(C.Z,{placeholder:"Search by name or code",value:i.key,onChange:function(e){return r((0,p.Z)((0,p.Z)({},i),{},{key:e.target.value}))},allowClear:!0})})}),(0,u.jsx)(b.Z,{span:3,children:(0,u.jsx)(v.Z.Item,{style:{marginBottom:0},children:(0,u.jsx)(d.Z,{type:"primary",htmlType:"submit",children:"Search"})})}),(0,u.jsxs)(b.Z,{span:5,children:[(0,u.jsx)(v.Z.Item,{style:{marginBottom:0,float:"right"},children:(0,u.jsx)(d.Z,{type:"primary",icon:(0,u.jsx)(R.Z,{}),onClick:function(){t.current.openForm()},children:"Add New"})}),n.length?(0,u.jsx)(Z.Z,{title:"Are you sure to delete these selected datas?",onConfirm:function(){a(n)},okText:"Yes",cancelText:"No",children:(0,u.jsx)(d.Z,{type:"primary",danger:!0,style:{float:"right"},icon:(0,u.jsx)(D.Z,{}),children:"Delete Selected"})}):null]})]})})}Le.baseURL="ecommerce/product/";var Oe=(0,a.forwardRef)((function(e,t){var n=e.list,i=e.userId,r=(0,a.useState)(!1),l=(0,x.Z)(r,2),s=l[0],o=l[1],c=(0,a.useState)({}),h=(0,x.Z)(c,2),f=h[0],m=h[1],Z=(0,a.useState)(!1),j=(0,x.Z)(Z,2),g=j[0],S=j[1],w=function(e){m((0,p.Z)((0,p.Z)({},f),e))};(0,a.useImperativeHandle)(t,(function(){return{openForm:function(e){o(!0),console.log("dt",e),m(e?(0,p.Z)({},e):{userId:i})}}}));var D=function(){S(!0),Le.saveJob(f).then((function(e){E(e.message),w((0,p.Z)({},e.data)),n(),o(!1)})).catch((function(e){"object"===typeof e.message?E(e.message[Object.keys(e.message)[0]],"error"):E(e.message,"error")})).finally((function(){S(!1)}))};return(0,a.useEffect)((function(){s||m({_id:null})}),[s]),(0,a.useEffect)((function(){f._id||w({slug:H.Z.removeSpecialChars(f.name||"")})}),[f.name]),(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(I.Z,{title:(f._id?"Edit":"Add")+" User",style:{top:20},open:s,okText:"Save",onOk:D,okButtonProps:{disabled:g},onCancel:function(){o(!1)},destroyOnClose:!0,maskClosable:!1,width:500,className:"app-modal-body",footer:[(0,u.jsx)(d.Z,{onClick:function(){o(!1)},children:"Cancel"},"cancel"),(0,u.jsx)(d.Z,{type:"primary",onClick:D,children:"save"},"save")],children:(0,u.jsx)(k.Z,{spinning:g,indicator:(0,u.jsx)(U.Z,{style:{fontSize:24},spin:!0}),children:(0,u.jsx)(v.Z,{layout:"vertical",children:(0,u.jsxs)(y.Z,{gutter:[12,2],children:[(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)(v.Z.Item,{label:"City",required:!0,children:(0,u.jsx)(C.Z,{placeholder:"City",value:f.city,onChange:function(e){w({city:e.target.value})}})})}),(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)(v.Z.Item,{label:"Pin",required:!0,children:(0,u.jsx)(C.Z,{placeholder:"Pin",value:f.pin,onChange:function(e){w({pin:e.target.value})}})})}),(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)(v.Z.Item,{label:"State",required:!0,children:(0,u.jsx)(C.Z,{placeholder:"State",value:f.state,onChange:function(e){w({state:e.target.value})}})})}),(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)(v.Z.Item,{label:"Street 1",required:!0,children:(0,u.jsx)(C.Z,{placeholder:"Street 1",value:f.street1,onChange:function(e){w({street1:e.target.value})}})})}),(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)(v.Z.Item,{label:"Street 2",required:!0,children:(0,u.jsx)(C.Z,{placeholder:"Street 2",value:f.street2,onChange:function(e){w({street2:e.target.value})}})})})]})})})})})})),Ne=(0,a.forwardRef)((function(e,t){var n=(0,a.useState)(!1),i=(0,x.Z)(n,2),r=i[0],l=i[1],s=(0,a.useState)({aspect:1}),o=(0,x.Z)(s,2),c=o[0],d=o[1];return(0,a.useImperativeHandle)(t,(function(){return{openForm:function(e){l(!0),d((0,p.Z)({},e))}}})),(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(I.Z,{title:c._id?"List of Varient":"Add User",style:{top:20},open:r,okText:"Save",onCancel:function(){l(!1)},destroyOnClose:!0,maskClosable:!1,width:1200,className:"app-modal-body",children:(0,u.jsx)(Ae,{productId:c._id})})})})),qe=function(){function e(){(0,_.Z)(this,e)}return(0,L.Z)(e,null,[{key:"walletdetail",value:function(e,t){return A.Z.get(this.baseURL+"/details"+e,{params:t})}},{key:"walletlist",value:function(e){return A.Z.get(this.baseURL+"/list",{params:e})}},{key:"walletsave",value:function(e,t){return A.Z.post(this.baseURL+"/save",e,{params:t})}}]),e}();function Pe(e){var t=e.userId,n=(0,a.useState)([]),i=(0,x.Z)(n,2),r=i[0],l=i[1],s=(0,a.useState)(!1),o=(0,x.Z)(s,2),c=o[0],h=o[1],f=(0,a.useState)([]),m=(0,x.Z)(f,2),v=m[0],y=m[1],b=(0,a.useState)({page:1,limit:20,userId:t}),C=(0,x.Z)(b,2),S=C[0],I=C[1],k=(0,a.useRef)(),w=(0,a.useRef)(),R=[{title:"#",width:40,render:function(e,t,n){return(0,u.jsx)("b",{children:n+1})}},{title:"Amount",dataIndex:"amount"},{title:"Type",dataIndex:"type"},{title:"Action",dataIndex:"_id",width:70,render:function(e,t){return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(Z.Z,{title:"Are you sure to delete this data?",onConfirm:function(){_(t._id)},okText:"Yes",cancelText:"No",children:[(0,u.jsx)(d.Z,{type:"primary",size:"small",danger:!0,icon:(0,u.jsx)(D.Z,{})}),"\xa0"]}),(0,u.jsx)(d.Z,{type:"primary",size:"small",icon:(0,u.jsx)(T.Z,{}),onClick:function(){k.current.openForm(t)}})]})}}].filter((function(e){return!e.hidden}));function U(){h(!0),qe.walletlist(S).then((function(e){var t;l(null===(t=e.data)||void 0===t?void 0:t.map((function(e){return(0,p.Z)((0,p.Z)({},e),{},{key:e._id})}))),I((0,p.Z)((0,p.Z)({},S),{},{limit:e.extra.limit,page:e.extra.page,total:e.extra.total}))})).catch((function(e){})).finally((function(){h(!1)}))}var _=function(e){qe.deleteJob(e).then((function(e){E(e.message),U(),y([])})).catch((function(e){E(e.message,"error")}))},L=R.map((function(e){return(0,p.Z)((0,p.Z)({},e),{},{ellipsis:!1})}));L[0].fixed=!0,L[L.length-1].fixed="right";var A={bordered:!0,loading:c,size:"small",title:function(){return(0,u.jsx)(ze,{addNewModalRef:k,selected:v,deleteData:_,qData:S,setQData:I,list:U})},showHeader:!0,footer:function(){return(0,u.jsx)(q,{qData:S,setQData:I})},rowSelection:{onChange:function(e){y(e)}},tableLayout:void 0};return(0,a.useEffect)((function(){U()}),[S.page,S.limit]),(0,u.jsxs)(u.Fragment,{children:[t?null:(0,u.jsx)(j.Z.Title,{level:5,style:{marginTop:0},children:"List of Users"}),(0,u.jsx)(g.Z,(0,p.Z)((0,p.Z)({},A),{},{pagination:{position:["none"],pageSize:S.limit},columns:L,dataSource:r.length?r:[],scroll:{y:"calc(100vh - 340px)",x:"calc(100vw - 387px)"}})),(0,u.jsx)(Be,{ref:k,list:U,userId:t}),(0,u.jsx)(Ee,{ref:w,list:U})]})}function ze(e){var t=e.addNewModalRef,n=e.selected,a=e.deleteData,i=e.qData,r=e.setQData,l=e.list;return(0,u.jsx)(v.Z,{onSubmitCapture:l,className:"search-form",children:(0,u.jsxs)(y.Z,{gutter:[12,2],children:[(0,u.jsx)(b.Z,{span:4,children:(0,u.jsx)(v.Z.Item,{style:{marginBottom:0},children:(0,u.jsx)(C.Z,{placeholder:"Search by name or code",value:i.key,onChange:function(e){return r((0,p.Z)((0,p.Z)({},i),{},{key:e.target.value}))},allowClear:!0})})}),(0,u.jsx)(b.Z,{span:3,children:(0,u.jsx)(v.Z.Item,{style:{marginBottom:0},children:(0,u.jsx)(d.Z,{type:"primary",htmlType:"submit",children:"Search"})})}),(0,u.jsxs)(b.Z,{span:5,children:[(0,u.jsx)(v.Z.Item,{style:{marginBottom:0,float:"right"},children:(0,u.jsx)(d.Z,{type:"primary",icon:(0,u.jsx)(R.Z,{}),onClick:function(){t.current.openForm()},children:"Add New"})}),n.length?(0,u.jsx)(Z.Z,{title:"Are you sure to delete these selected datas?",onConfirm:function(){a(n)},okText:"Yes",cancelText:"No",children:(0,u.jsx)(d.Z,{type:"primary",danger:!0,style:{float:"right"},icon:(0,u.jsx)(D.Z,{}),children:"Delete Selected"})}):null]})]})})}qe.baseURL="wallet";var Be=(0,a.forwardRef)((function(e,t){var n=e.list,i=e.userId,r=(0,a.useState)(!1),l=(0,x.Z)(r,2),s=l[0],o=l[1],c=(0,a.useState)({}),h=(0,x.Z)(c,2),f=h[0],m=h[1],Z=(0,a.useState)(!1),j=(0,x.Z)(Z,2),g=j[0],w=j[1],D=function(e){m((0,p.Z)((0,p.Z)({},f),e))};(0,a.useImperativeHandle)(t,(function(){return{openForm:function(e){o(!0),console.log("dt",e),m(e?(0,p.Z)({},e):{userId:i})}}}));var T=function(){w(!0),qe.walletsave(f).then((function(e){E(e.message),D((0,p.Z)({},e.data)),n(),o(!1)})).catch((function(e){"object"===typeof e.message?E(e.message[Object.keys(e.message)[0]],"error"):E(e.message,"error")})).finally((function(){w(!1)}))};return(0,a.useEffect)((function(){s||m({_id:null})}),[s]),(0,a.useEffect)((function(){f._id||D({slug:H.Z.removeSpecialChars(f.name||"")})}),[f.name]),(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(I.Z,{title:(f._id?"Edit":"Add")+" User",style:{top:20},open:s,okText:"Save",onOk:T,okButtonProps:{disabled:g},onCancel:function(){o(!1)},destroyOnClose:!0,maskClosable:!1,width:500,className:"app-modal-body",footer:[(0,u.jsx)(d.Z,{onClick:function(){o(!1)},children:"Cancel"},"cancel"),(0,u.jsx)(d.Z,{type:"primary",onClick:T,children:"save"},"save")],children:(0,u.jsx)(k.Z,{spinning:g,indicator:(0,u.jsx)(U.Z,{style:{fontSize:24},spin:!0}),children:(0,u.jsx)(v.Z,{layout:"vertical",children:(0,u.jsxs)(y.Z,{gutter:[12,2],children:[(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)(v.Z.Item,{label:"Type",required:!0,children:(0,u.jsxs)(S.Z,{value:f.type,defaultValue:"admin",onChange:function(e){D({type:e})},children:[(0,u.jsx)(S.Z.Option,{value:"referral",children:"Referral"}),(0,u.jsx)(S.Z.Option,{value:"payment-gateway",children:"Payment-Gateway"}),(0,u.jsx)(S.Z.Option,{value:"admin",children:"Admin"})]})})}),(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)(v.Z.Item,{label:"Amount",required:!0,children:(0,u.jsx)(C.Z,{placeholder:"Amount",value:f.amount,onChange:function(e){D({amount:e.target.value})}})})})]})})})})})})),Ee=(0,a.forwardRef)((function(e,t){var n=(0,a.useState)(!1),i=(0,x.Z)(n,2),r=i[0],l=i[1],s=(0,a.useState)({aspect:1}),o=(0,x.Z)(s,2),c=o[0],d=o[1];return(0,a.useImperativeHandle)(t,(function(){return{openForm:function(e){l(!0),d((0,p.Z)({},e))}}})),(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(I.Z,{title:c._id?"List of Varient":"Add User",style:{top:20},open:r,okText:"Save",onCancel:function(){l(!1)},destroyOnClose:!0,maskClosable:!1,width:1200,className:"app-modal-body",children:(0,u.jsx)(Pe,{productId:c._id})})})}));function Me(e){var t=e.userId,n=(0,a.useState)([]),i=(0,x.Z)(n,2),r=i[0],l=i[1],s=(0,a.useState)(!1),o=(0,x.Z)(s,2),c=o[0],h=o[1],f=(0,a.useState)([]),v=(0,x.Z)(f,2),y=v[0],b=v[1],C=(0,a.useState)({page:1,limit:20,userId:t}),S=(0,x.Z)(C,2),I=S[0],k=S[1],w=(0,a.useRef)(),R=(0,a.useRef)(),U=(0,a.useRef)(),_=(0,a.useRef)(),L=[{title:"#",width:40,render:function(e,t,n){return(0,u.jsx)("b",{children:n+1})}},{title:"Username",dataIndex:"name",width:150},{title:"Phone",dataIndex:"phone",width:100},{title:"Email",dataIndex:"email",width:200},{title:"Job",dataIndex:"_id",width:80,render:function(e,t){return(0,u.jsx)(d.Z,{type:"primary",size:"small",onClick:function(){R.current.openForm({_id:t._id,name:t.name})},children:"Address"})}},{title:"Cart",dataIndex:"_id",width:80,render:function(e,t){return(0,u.jsx)(d.Z,{type:"primary",size:"small",onClick:function(){U.current.openForm({_id:t._id,name:t.name})},children:"Cart"})}},{title:"Wallet History",dataIndex:"_id",width:80,render:function(e,t){return(0,u.jsx)(d.Z,{type:"primary",size:"small",onClick:function(){_.current.openForm({_id:t._id,name:t.name})},children:"Wallet"})}},{title:"Status",dataIndex:"status",width:80,render:function(e){return"blocked"===e?(0,u.jsx)(m.Z,{color:"red",children:"Blocked"}):"active"===e?(0,u.jsx)(m.Z,{color:"green",children:"Active"}):(0,u.jsx)(m.Z,{color:"yellow",children:"Inactive"})}},{title:"Action",dataIndex:"_id",width:70,render:function(e,t){return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(Z.Z,{title:"Are you sure to delete this User?",onConfirm:function(){F(t._id)},okText:"Yes",cancelText:"No",children:[(0,u.jsx)(d.Z,{type:"primary",size:"small",danger:!0,icon:(0,u.jsx)(D.Z,{})}),"\xa0"]}),(0,u.jsx)(d.Z,{type:"primary",size:"small",icon:(0,u.jsx)(T.Z,{}),onClick:function(){w.current.openForm(t._id)}})]})}}].filter((function(e){return!e.hidden}));function A(){h(!0),we.listUser(I).then((function(e){var t;l(null===(t=e.data)||void 0===t?void 0:t.map((function(e){return(0,p.Z)((0,p.Z)({},e),{},{key:e._id})}))),k((0,p.Z)((0,p.Z)({},I),{},{limit:e.extra.limit,page:e.extra.page,total:e.extra.total}))})).catch((function(e){})).finally((function(){h(!1)}))}var F=function(e){we.deleteUser(e).then((function(e){E(e.message),A(),b([])})).catch((function(e){E(e.message,"error")}))},O=L.map((function(e){return(0,p.Z)((0,p.Z)({},e),{},{ellipsis:!1})}));O[0].fixed=!0,O[O.length-1].fixed="right";var N={bordered:!0,loading:c,size:"small",title:function(){return(0,u.jsx)(Ye,{addNewModalRef:w,selected:y,deleteData:F,qData:I,setQData:k,list:A})},showHeader:!0,footer:function(){return(0,u.jsx)(q,{qData:I,setQData:k})},rowSelection:{onChange:function(e){b(e)}},tableLayout:void 0};return(0,a.useEffect)((function(){A()}),[I.page,I.limit]),(0,u.jsxs)(u.Fragment,{children:[t?null:(0,u.jsx)(j.Z.Title,{level:5,style:{marginTop:0},children:"List of Users"}),(0,u.jsx)(g.Z,(0,p.Z)((0,p.Z)({},N),{},{pagination:{position:["none"],pageSize:I.limit},columns:O,dataSource:r.length?r:[],scroll:{y:"calc(100vh - 340px)",x:"calc(100vw - 387px)"}})),(0,u.jsx)(He,{ref:w,list:A,userId:t}),(0,u.jsx)(Qe,{ref:R}),(0,u.jsx)(Ve,{ref:U}),(0,u.jsx)(We,{ref:_})]})}function Ye(e){var t=e.addNewModalRef,n=e.selected,a=e.deleteData,i=e.qData,r=(e.setQData,e.list),l=function(e,t){i[t]=e,void 0!==e&&""!==e||(delete i[t],r())};return(0,u.jsx)(v.Z,{onSubmitCapture:r,className:"search-form",children:(0,u.jsxs)(y.Z,{gutter:[12,2],children:[(0,u.jsx)(b.Z,{xs:24,xl:4,children:(0,u.jsx)(v.Z.Item,{style:{marginBottom:0},children:(0,u.jsx)(C.Z,{placeholder:"Search by name or code",value:i.key,onChange:function(e){return l(e.target.value,"key")},allowClear:!0})})}),(0,u.jsx)(b.Z,{xs:24,xl:4,children:(0,u.jsx)(v.Z.Item,{children:(0,u.jsxs)(S.Z,{value:i.status,allowClear:!0,placeholder:"Search By Status",onChange:function(e){return l(e,"status")},children:[(0,u.jsx)(S.Z.Option,{value:"active",children:"Active"}),(0,u.jsx)(S.Z.Option,{value:"inactive",children:"Inactive"}),(0,u.jsx)(S.Z.Option,{value:"blocked",children:"Blocked"})]})})}),(0,u.jsx)(b.Z,{span:3,children:(0,u.jsx)(v.Z.Item,{style:{marginBottom:0},children:(0,u.jsx)(d.Z,{type:"primary",htmlType:"submit",children:"Search"})})}),(0,u.jsxs)(b.Z,{span:5,children:[(0,u.jsx)(v.Z.Item,{style:{marginBottom:0,float:"right"},children:(0,u.jsx)(d.Z,{type:"primary",icon:(0,u.jsx)(R.Z,{}),onClick:function(){t.current.openForm()},children:"Add New"})}),n.length?(0,u.jsx)(Z.Z,{title:"Are you sure to delete these selected images?. Be sure to delete the image from server.",onConfirm:function(){a(n)},okText:"Yes",cancelText:"No",children:(0,u.jsx)(d.Z,{type:"primary",danger:!0,style:{float:"right"},icon:(0,u.jsx)(D.Z,{}),children:"Delete Selected"})}):null]})]})})}var He=(0,a.forwardRef)((function(e,t){var n=e.list,i=e.userId,r=(0,a.useState)(!1),l=(0,x.Z)(r,2),s=l[0],o=l[1],c=(0,a.useState)({aspect:1}),h=(0,x.Z)(c,2),f=h[0],m=h[1],Z=(0,a.useState)(!1),j=(0,x.Z)(Z,2),g=j[0],w=j[1],D=(0,a.useState)([]),T=(0,x.Z)(D,2),R=T[0],_=T[1],L=function(e){Object.entries(e).forEach((function(e){for(var t=f,n=e[0],a=e[1],i=n.split("."),r=0;r<i.length;r++)r+1===i.length?t[i[r]]=a:("undefined"===typeof t[i[r]]&&(1*parseInt(i[r+1])>=0?t[i[r]]=[]:t[i[r]]={}),t=t[i[r]])})),m((0,p.Z)({},f))};(0,a.useImperativeHandle)(t,(function(){return{openForm:function(e){o(!0),m(e?{_id:e}:{userId:i})}}}));var A=function(){w(!0),we.saveUser(f).then((function(e){E(e.message),L((0,p.Z)({},e.data)),n(),o(!1)})).catch((function(e){"object"===typeof e.message?E(e.message[Object.keys(e.message)[0]],"error"):E(e.message,"error")})).finally((function(){w(!1)}))};return(0,a.useEffect)((function(){f._id&&(w(!0),we.detailUser(f._id).then((function(e){var t,n;m(e.data||{}),_(null!==(t=e.data)&&void 0!==t&&t.avatar?[null===(n=e.data)||void 0===n?void 0:n.avatar]:[])})).catch((function(e){E(e.message,"error")})).finally((function(){w(!1)})))}),[f._id]),(0,a.useEffect)((function(){s?_([]):m({_id:null})}),[s]),(0,a.useEffect)((function(){L({avatar:null===R||void 0===R?void 0:R[0]})}),[R]),(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(I.Z,{title:(f._id?"Edit":"Add")+" User",style:{top:20},open:s,okText:"Save",onOk:A,okButtonProps:{disabled:g},onCancel:function(){o(!1)},destroyOnClose:!0,maskClosable:!1,width:800,className:"app-modal-body",footer:[(0,u.jsx)(d.Z,{onClick:function(){o(!1)},children:"Cancel"},"cancel"),(0,u.jsx)(d.Z,{type:"primary",onClick:A,children:"Save"},"save")],children:(0,u.jsx)(k.Z,{spinning:g,indicator:(0,u.jsx)(U.Z,{style:{fontSize:24},spin:!0}),children:(0,u.jsx)(v.Z,{layout:"vertical",children:(0,u.jsxs)(y.Z,{gutter:[12,2],children:[(0,u.jsx)(b.Z,{span:20,children:(0,u.jsxs)(y.Z,{gutter:[12,2],children:[(0,u.jsx)(b.Z,{span:12,children:(0,u.jsx)(v.Z.Item,{label:"Username",required:!0,children:(0,u.jsx)(C.Z,{placeholder:"John Doe",value:f.name,onChange:function(e){L({name:e.target.value})}})})}),(0,u.jsx)(b.Z,{span:12,children:(0,u.jsx)(v.Z.Item,{label:"Email",required:!0,children:(0,u.jsx)(C.Z,{placeholder:"Email",value:f.email,onChange:function(e){L({email:e.target.value})}})})}),(0,u.jsx)(b.Z,{span:12,children:(0,u.jsx)(v.Z.Item,{label:"Phone",required:!0,children:(0,u.jsx)(C.Z,{placeholder:"Phone",value:f.phone,onChange:function(e){L({phone:e.target.value})}})})})]})}),(0,u.jsx)(b.Z,{span:4,children:(0,u.jsx)(v.Z.Item,{label:"Avatar",children:(0,u.jsx)(fe,{fileList:R,setFileList:_,count:1})})}),(0,u.jsx)(b.Z,{span:10,children:(0,u.jsx)(v.Z.Item,{label:"Status",required:!0,children:(0,u.jsxs)(S.Z,{value:f.status,onChange:function(e){L({status:e})},children:[(0,u.jsx)(S.Z.Option,{value:"active",children:"Active"}),(0,u.jsx)(S.Z.Option,{value:"inactive",children:"Inactive"}),(0,u.jsx)(S.Z.Option,{value:"blocked",children:"Blocked"})]})})})]})})})})})})),Qe=(0,a.forwardRef)((function(e,t){var n=(0,a.useState)(!1),i=(0,x.Z)(n,2),r=i[0],l=i[1],s=(0,a.useState)({}),o=(0,x.Z)(s,2),c=o[0],h=o[1];return(0,a.useImperativeHandle)(t,(function(){return{openForm:function(e){l(!0),h(e?(0,p.Z)({},e):{status:!0})}}})),(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(I.Z,{title:(0,u.jsxs)(u.Fragment,{children:["All Job List ",(0,u.jsx)(j.Z.Text,{type:"danger",children:null===c||void 0===c?void 0:c.name})]}),style:{top:20},open:r,onCancel:function(){l(!1)},destroyOnClose:!0,maskClosable:!1,width:1600,className:"app-modal-body-overflow",footer:[(0,u.jsx)(d.Z,{onClick:function(){l(!1)},children:"Cancel"},"cancel")],children:(0,u.jsx)(Te,{userId:c._id})})})})),Ve=(0,a.forwardRef)((function(e,t){var n=(0,a.useState)(!1),i=(0,x.Z)(n,2),r=i[0],l=i[1],s=(0,a.useState)({}),o=(0,x.Z)(s,2),c=o[0],h=o[1];return(0,a.useImperativeHandle)(t,(function(){return{openForm:function(e){l(!0),h(e?(0,p.Z)({},e):{status:!0})}}})),(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(I.Z,{title:(0,u.jsxs)(u.Fragment,{children:["All Product List of ",(0,u.jsx)(j.Z.Text,{type:"danger",children:null===c||void 0===c?void 0:c.name})]}),style:{top:20},open:r,onCancel:function(){l(!1)},destroyOnClose:!0,maskClosable:!1,width:1600,className:"app-modal-body-overflow",footer:[(0,u.jsx)(d.Z,{onClick:function(){l(!1)},children:"Cancel"},"cancel")],children:(0,u.jsx)(Ae,{userId:c._id})})})})),We=(0,a.forwardRef)((function(e,t){var n=(0,a.useState)(!1),i=(0,x.Z)(n,2),r=i[0],l=i[1],s=(0,a.useState)({}),o=(0,x.Z)(s,2),c=o[0],h=o[1];return(0,a.useImperativeHandle)(t,(function(){return{openForm:function(e){l(!0),h(e?(0,p.Z)({},e):{status:!0})}}})),(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(I.Z,{title:(0,u.jsxs)(u.Fragment,{children:["All Product List of ",(0,u.jsx)(j.Z.Text,{type:"danger",children:null===c||void 0===c?void 0:c.name})]}),style:{top:20},open:r,onCancel:function(){l(!1)},destroyOnClose:!0,maskClosable:!1,width:1600,className:"app-modal-body-overflow",footer:[(0,u.jsx)(d.Z,{onClick:function(){l(!1)},children:"Cancel"},"cancel")],children:(0,u.jsx)(Pe,{userId:c._id})})})})),Je=n(7128),Ke=n(2014),Ge=n(732),Xe=function(){function e(){(0,_.Z)(this,e)}return(0,L.Z)(e,null,[{key:"typeDetails",value:function(e,t){return A.Z.get(this.baseURL+"/details/"+e,{params:t})}},{key:"typeList",value:function(e){return A.Z.get(this.baseURL+"/list",{params:e})}},{key:"typeSave",value:function(e,t){return A.Z.post(this.baseURL+"/create",e,{params:t})}},{key:"typeDelete",value:function(e){return A.Z.post(this.baseURL+"/delete",{ids:e})}}]),e}();function $e(e){var t=e.productSpecialization,n=e.categoryId,i=(0,a.useState)([]),r=(0,x.Z)(i,2),l=r[0],s=r[1],o=(0,a.useState)(!1),c=(0,x.Z)(o,2),h=c[0],f=c[1],v=(0,a.useState)([]),y=(0,x.Z)(v,2),b=y[0],C=y[1],S=(0,a.useState)([]),I=(0,x.Z)(S,2),k=I[0],w=I[1],R=(0,a.useState)([]),U=(0,x.Z)(R,2),_=U[0],L=U[1],A=(0,a.useState)({page:1,limit:20,type:"product",categoryId:n}),F=(0,x.Z)(A,2),O=F[0],N=F[1],P=(0,a.useRef)(),z=[{title:"#",width:40,render:function(e,t,n){return(0,u.jsx)("b",{children:n+1})}},{title:"Name",dataIndex:"name",width:150},{title:"Slug",dataIndex:"slug",width:100},{title:"Description",dataIndex:"description",width:400,render:function(e){return(0,u.jsx)(j.Z.Text,{ellipsis:{expandable:!0},children:e})}},{title:"Meta-Title",dataIndex:"metaTitle",width:100},{title:"Meta-Tag",dataIndex:"metaTag",width:100},{title:"Meta-Description",dataIndex:"metaDescription",width:100},{title:"Status",dataIndex:"status",width:80,render:function(e){return e?(0,u.jsx)(m.Z,{color:"green",children:"Active"}):(0,u.jsx)(m.Z,{color:"red",children:"Inactive"})}},{title:"Action",dataIndex:"_id",width:70,render:function(e,t){return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(Z.Z,{title:"Are you sure to delete this data?",onConfirm:function(){Y(t)},okText:"Yes",cancelText:"No",children:[(0,u.jsx)(d.Z,{type:"primary",size:"small",danger:!0,icon:(0,u.jsx)(D.Z,{})}),"\xa0"]}),(0,u.jsx)(d.Z,{type:"primary",size:"small",icon:(0,u.jsx)(T.Z,{}),onClick:function(){P.current.openForm(t)}})]})}}].filter((function(e){return!e.hidden}));function M(){f(!0),""!==O.categoryId&&Le.listUser(O).then((function(e){var t;s(null===(t=e.data)||void 0===t?void 0:t.map((function(e){return(0,p.Z)((0,p.Z)({},e),{},{key:e._id})}))),N((0,p.Z)((0,p.Z)({},O),{},{limit:e.extra.limit,page:e.extra.page,total:e.extra.total}))})).catch((function(e){})).finally((function(){f(!1)}))}var Y=function(e){Le.deleteUser(e).then((function(e){E(e.message),M(),C([])})).catch((function(e){E(e.message,"error")}))},H=z.map((function(e){return(0,p.Z)((0,p.Z)({},e),{},{ellipsis:!1})}));H[0].fixed=!0,H[H.length-1].fixed="right";var Q={bordered:!0,loading:h,size:"small",title:function(){return(0,u.jsx)(et,{addNewModalRef:P,selected:b,deleteData:Y,qData:O,setQData:N,list:M})},showHeader:!0,footer:function(){return(0,u.jsx)(q,{qData:O,setQData:N})},rowSelection:{onChange:function(e){C(e)}},tableLayout:void 0};return(0,a.useEffect)((function(){M()}),[O.page,O.limit,O.categoryId,n]),(0,a.useEffect)((function(){re.list({isAll:1}).then((function(e){w(e.data||[])})).catch((function(e){B.ZP.error("Category data not loaded")})),Xe.typeList().then((function(e){L(e.data||[])})).catch((function(e){B.ZP.error("Specialization data not loaded")}))}),[]),(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(j.Z.Title,{level:5,style:{marginTop:0},children:"Product List"}),(0,u.jsx)(g.Z,(0,p.Z)((0,p.Z)({},Q),{},{pagination:{position:["none"],pageSize:O.limit},columns:H,dataSource:l.length?l:[],scroll:{y:"calc(100vh - 340px)",x:"calc(100vw - 387px)"}})),(0,u.jsx)(tt,{ref:P,list:M,category:k,qData:O,specializations:_,productSpecialization:t,categoryId:n})]})}function et(e){var t=e.addNewModalRef,n=e.selected,a=e.deleteData,i=e.qData,r=(e.setQData,e.list);return(0,u.jsx)(v.Z,{onSubmitCapture:r,className:"search-form",children:(0,u.jsxs)(y.Z,{gutter:[12,2],children:[(0,u.jsx)(b.Z,{xs:24,xl:4,children:(0,u.jsx)(v.Z.Item,{style:{marginBottom:0},children:(0,u.jsx)(C.Z,{placeholder:"Search by name or code",value:i.key,onChange:function(e){return t=e.target.value,i[n="key"]=t,void(void 0!==t&&""!==t||(delete i[n],r()));var t,n},allowClear:!0})})}),(0,u.jsx)(b.Z,{span:3,children:(0,u.jsx)(v.Z.Item,{style:{marginBottom:0},children:(0,u.jsx)(d.Z,{type:"primary",htmlType:"submit",children:"Search"})})}),(0,u.jsxs)(b.Z,{span:5,children:[(0,u.jsx)(v.Z.Item,{style:{marginBottom:0,float:"right"},children:(0,u.jsx)(d.Z,{type:"primary",icon:(0,u.jsx)(R.Z,{}),onClick:function(){t.current.openForm()},children:"Add New"})}),n.length?(0,u.jsx)(Z.Z,{title:"Are you sure to delete these selected data ?",onConfirm:function(){a(n)},okText:"Yes",cancelText:"No",children:(0,u.jsx)(d.Z,{type:"primary",danger:!0,style:{float:"right"},icon:(0,u.jsx)(D.Z,{}),children:"Delete Selected"})}):null]})]})})}Xe.baseURL="specialization";var tt=(0,a.forwardRef)((function(e,t){var n=e.list,i=e.categoryId,r=e.category,s=e.specializations,o=e.productSpecialization,c=(0,a.useState)(!1),h=(0,x.Z)(c,2),f=h[0],m=h[1],Z=(0,a.useState)({aspect:1}),j=(0,x.Z)(Z,2),g=j[0],w=j[1],D=(0,a.useState)(!1),T=(0,x.Z)(D,2),R=T[0],_=T[1],L=(0,a.useState)([]),A=(0,x.Z)(L,2),F=A[0],O=A[1],N=(0,a.useState)([]),q=(0,x.Z)(N,2),P=q[0],z=q[1],M=function(e,t){for(var n=g,a=t.split("."),i=0;i<a.length;i++)i+1===a.length?n[a[i]]=e:("undefined"===typeof n[a[i]]&&(1*parseInt(a[i+1])>=0?n[a[i]]=[]:n[a[i]]={}),n=n[a[i]]);w((0,p.Z)((0,p.Z)({},g),e))};(0,a.useImperativeHandle)(t,(function(){return{openForm:function(e){m(!0),w(e?(0,p.Z)((0,p.Z)({},e),{},{ocassion:[],flavour:[],recipient:[],relation:[],specializationIds:[]}):{isPremium:!1,isBestSelling:!1,forBirthday:!1,forAnniversary:!1,isBestSellingCombos:!1,variants:[{}],ocassion:[],flavour:[],recipient:[],relation:[],specializationIds:[],categoryIds:[i]})}}}));var Y=function(){_(!0),Le.saveUser(g).then((function(e){B.ZP.success(e.message),n(),m(!1)})).catch((function(e){if("object"===typeof e.message){var t=e.message[Object.keys(e.message)[0]];B.ZP.error(t)}else E(e.message,"error")})).finally((function(){_(!1)}))};return(0,a.useEffect)((function(){g._id||M(H.Z.removeSpecialChars((null===g||void 0===g?void 0:g.name)||""),"slug")}),[g.name]),(0,a.useEffect)((function(){w((0,p.Z)((0,p.Z)({},g),{},{thumbImg:F[0]}))}),[F]),(0,a.useEffect)((function(){w((0,p.Z)((0,p.Z)({},g),{},{imgs:P}))}),[P]),(0,a.useEffect)((function(){var e,t,n,a;((null===g||void 0===g||null===(e=g.ocassion)||void 0===e?void 0:e.length)>0||(null===g||void 0===g||null===(t=g.flavour)||void 0===t?void 0:t.length)>0||(null===g||void 0===g||null===(n=g.recipient)||void 0===n?void 0:n.length)>0||(null===g||void 0===g||null===(a=g.relation)||void 0===a?void 0:a.length)>0)&&M([].concat((0,se.Z)(null===g||void 0===g?void 0:g.ocassion),(0,se.Z)(null===g||void 0===g?void 0:g.flavour),(0,se.Z)(null===g||void 0===g?void 0:g.relation),(0,se.Z)(null===g||void 0===g?void 0:g.recipient)),"specializationIds")}),[g.ocassion,g.flavour,null===g||void 0===g?void 0:g.relation,null===g||void 0===g?void 0:g.recipient]),(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(I.Z,{title:(g._id?"Edit":"Add New")+" Product",style:{top:20},open:f,okText:"Save",onOk:Y,okButtonProps:{disabled:R},onCancel:function(){m(!1)},destroyOnClose:!0,maskClosable:!1,width:1200,className:"app-modal-body",footer:[(0,u.jsx)(d.Z,{onClick:function(){m(!1)},children:"Cancel"},"cancel"),(0,u.jsx)(d.Z,{type:"primary",onClick:Y,children:"Save"},"save")],children:(0,u.jsx)(k.Z,{spinning:R,indicator:(0,u.jsx)(U.Z,{style:{fontSize:24},spin:!0}),children:(0,u.jsx)(v.Z,{layout:"vertical",children:(0,u.jsxs)(y.Z,{gutter:[12,2],children:[(0,u.jsx)(b.Z,{span:8,children:(0,u.jsx)(v.Z.Item,{label:"Name",required:!0,children:(0,u.jsx)(C.Z,{placeholder:"Name",value:g.name,onChange:function(e){M(e.target.value,"name")}})})}),(0,u.jsx)(b.Z,{span:8,children:(0,u.jsx)(v.Z.Item,{label:"Slug",required:!0,children:(0,u.jsx)(C.Z,{placeholder:"Slug",value:g.slug,onChange:function(e){M(H.Z.removeSpecialChars(e.target.value),"slug")}})})}),(0,u.jsx)(b.Z,{span:8,children:(0,u.jsx)(v.Z.Item,{label:"Category",required:!0,children:(0,u.jsx)(S.Z,{mode:"multiple",value:g.categoryIds,onChange:function(e){M(e,"categoryIds")},options:r.map((function(e){return{value:e._id,label:e.name}}))})})}),null===o||void 0===o?void 0:o.map((function(e,t){return(0,u.jsx)(b.Z,{span:12,children:(0,u.jsx)(v.Z.Item,{label:"Specialization (".concat(null===e||void 0===e?void 0:e.toUpperCase(),")"),children:(0,u.jsx)(S.Z,{mode:"multiple",value:null===g||void 0===g?void 0:g[e],onChange:function(t){M(t,e)},options:s.filter((function(t){return t.type===e})).map((function(e,t){return{value:e._id,label:e.name}}))})})},t)})),(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)(nt,{variantDetails:g.variants,parentKay:"variants",handleChange:M})}),(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)(v.Z.Item,{label:"Description",required:!0,children:(0,u.jsx)(X,{initialValue:g.description,onChange:function(e){g.description=e}})})}),(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)(v.Z.Item,{label:"High Light",required:!0,children:(0,u.jsx)(X,{initialValue:g.heighlight,onChange:function(e){g.heighlight=e}})})}),(0,u.jsx)(b.Z,{span:8,children:(0,u.jsx)(v.Z.Item,{label:"Meta Title",required:!0,children:(0,u.jsx)(C.Z,{placeholder:"Meta title",value:g.metaTitle,onChange:function(e){M(e.target.value,"metaTitle")}})})}),(0,u.jsx)(b.Z,{span:8,children:(0,u.jsx)(v.Z.Item,{label:"Meta Tag",required:!0,children:(0,u.jsx)(C.Z,{placeholder:"Meta tag",value:g.metaTag,onChange:function(e){M(e.target.value,"metaTag")}})})}),(0,u.jsx)(b.Z,{span:8,children:(0,u.jsx)(v.Z.Item,{label:"Meta Description",required:!0,children:(0,u.jsx)(C.Z.TextArea,{rows:1,placeholder:"Meta-Description",value:g.metaDescription,onChange:function(e){M(e.target.value,"metaDescription")}})})}),(0,u.jsx)(Je.Z,{}),(0,u.jsx)(b.Z,{span:8,children:(0,u.jsx)(v.Z.Item,{children:(0,u.jsx)(l.Z,{bordered:!0,size:"small",children:(0,u.jsx)(Ke.Z,{value:g.isPopular,onChange:function(e){return M({isPopular:e})},children:"Popular"})})})}),(0,u.jsx)(b.Z,{span:8,children:(0,u.jsx)(v.Z.Item,{children:(0,u.jsx)(l.Z,{bordered:!0,size:"small",children:(0,u.jsx)(Ke.Z,{value:g.isPremium,onChange:function(e){return M({isPremium:e})},children:"Premium"})})})}),(0,u.jsx)(b.Z,{span:8,children:(0,u.jsx)(v.Z.Item,{children:(0,u.jsx)(l.Z,{bordered:!0,size:"small",children:(0,u.jsx)(Ke.Z,{value:g.isBestSelling,onChange:function(e){return M({isBestSelling:e})},children:"Best Selling"})})})}),(0,u.jsx)(b.Z,{span:6,children:(0,u.jsx)(v.Z.Item,{label:"Status",required:!0,children:(0,u.jsxs)(S.Z,{value:g.status,onChange:function(e){M(e,"status")},children:[(0,u.jsx)(S.Z.Option,{value:!0,children:"Active"}),(0,u.jsx)(S.Z.Option,{value:!1,children:"Inactive"})]})})}),(0,u.jsx)(Je.Z,{}),(0,u.jsx)(b.Z,{span:4,children:(0,u.jsx)(v.Z.Item,{label:"Thumbnail Photo",children:(0,u.jsx)(fe,{fileList:F,setFileList:O})})}),(0,u.jsx)(b.Z,{span:20,children:(0,u.jsx)(v.Z.Item,{label:"Photo",children:(0,u.jsx)(fe,{fileList:P,setFileList:z,count:20})})})]})})})})})}));function nt(e){var t=e.variantDetails,n=e.parentKay,i=e.handleChange;return(0,u.jsxs)(a.Fragment,{children:[(0,u.jsx)(Je.Z,{orientation:"left",children:"variants"===n?"Variants":"Variant"}),(0,u.jsx)(g.Z,{bordered:!0,size:"small",showHeader:!0,footer:null,tableLayout:void 0,pagination:{position:["none"]},columns:[{title:"Weight",dataIndex:"weight",render:function(e,t,a){return(0,u.jsx)(C.Z,{placeholder:"Weight",value:e,onChange:function(e){i(e.target.value,"".concat(n,".").concat(a,".weight"))}})}},{title:"Price",dataIndex:"price",width:300,render:function(e,t,a){return(0,u.jsx)(C.Z,{placeholder:"Price (In \u20b9)",value:e,onChange:function(e){i(H.Z.handleInteger(e.target.value),"".concat(n,".").concat(a,".price"))}})}},{title:"Actual Price",dataIndex:"actual_price",width:300,render:function(e,t,a){return(0,u.jsx)(C.Z,{placeholder:"Actual Price (In \u20b9)",value:e,onChange:function(e){i(H.Z.handleFloat(e.target.value),"".concat(n,".").concat(a,".actualPrice"))}})}},{title:"Action",dataIndex:"price",width:100,render:function(e,a,r){return(0,u.jsxs)(u.Fragment,{children:[r+1===t.length?(0,u.jsx)(d.Z,{icon:(0,u.jsx)(R.Z,{}),shape:"circle",type:"dashed",onClick:function(){i([].concat((0,se.Z)(t),[{}]),n)}}):null,r+1===t.length&&0!==r?(0,u.jsx)(d.Z,{icon:(0,u.jsx)(Ge.Z,{}),shape:"circle",type:"dashed",className:"mx-2",danger:!0,onClick:function(){t.pop(),i((0,se.Z)(t),n)}}):null]})}}],dataSource:null!==t&&void 0!==t&&t.length?null===t||void 0===t?void 0:t.map((function(e,t){return(0,p.Z)((0,p.Z)({},e),{},{key:t})})):[]})]})}var at=function(){function e(){(0,_.Z)(this,e)}return(0,L.Z)(e,null,[{key:"list",value:function(e){return A.Z.get(this.baseURL+"/list",{params:e})}},{key:"save",value:function(e,t){return A.Z.post(this.baseURL+"/save",e,{params:t})}},{key:"delete",value:function(e){return A.Z.post(this.baseURL+"/delete",{ids:e})}},{key:"details",value:function(e){return A.Z.get(this.baseURL+"/details/"+e)}}]),e}();function it(){var e=(0,a.useState)([]),t=(0,x.Z)(e,2),n=t[0],i=t[1],r=(0,a.useState)(!1),l=(0,x.Z)(r,2),s=l[0],o=l[1],c=(0,a.useState)([]),h=(0,x.Z)(c,2),f=h[0],v=h[1],y=(0,a.useState)({page:1,limit:20}),b=(0,x.Z)(y,2),C=b[0],S=b[1],I=(0,a.useState)([]),k=(0,x.Z)(I,2),w=k[0],R=k[1],U=(0,a.useState)([]),_=(0,x.Z)(U,2),L=_[0],A=_[1],F=(0,a.useRef)(),N=[{title:"#",width:30,render:function(e,t,n){return(0,u.jsx)("b",{children:n+1})}},{title:"Title",dataIndex:"title",width:150},{title:"Products",dataIndex:"productDetails",width:350,render:function(e){return e.map((function(e){return(0,u.jsx)(m.Z,{children:e.name},e._id)}))}},{title:"Discount Percent",dataIndex:"discountPercent",width:100},{title:"Max Discount",dataIndex:"maxDiscountValue",width:100},{title:"Min Order Price",dataIndex:"minimunOrderPrice",width:100},{title:"Duration",dataIndex:"startDate",width:200,render:function(e,t){return(0,u.jsxs)("span",{children:[z()(e).format("DD MMM YYYY")," To ",z()(t.endDate).format("DD MMM YYYY")," "]})}},{title:"Action",dataIndex:"_id",width:70,render:function(e,t){return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(Z.Z,{title:"Are you sure to delete this User?",onConfirm:function(){B(t._id)},okText:"Yes",cancelText:"No",children:[(0,u.jsx)(d.Z,{type:"primary",size:"small",danger:!0,icon:(0,u.jsx)(D.Z,{})}),"\xa0"]}),(0,u.jsx)(d.Z,{type:"primary",size:"small",icon:(0,u.jsx)(T.Z,{}),onClick:function(){F.current.openForm(t)}})]})}}].filter((function(e){return!e.hidden}));function P(){o(!0),at.list(C).then((function(e){var t;i(null===(t=e.data)||void 0===t?void 0:t.map((function(e){return(0,p.Z)({key:e._id},e)})).reverse()),S((0,p.Z)((0,p.Z)({},C),{},{limit:e.extra.limit,page:e.extra.page,total:e.extra.total}))})).catch((function(e){})).finally((function(){o(!1)}))}var B=function(e){at.delete(e).then((function(e){E(e.message),P(),v([])})).catch((function(e){E(e.message,"error")}))},M=N.map((function(e){return(0,p.Z)((0,p.Z)({},e),{},{ellipsis:!1})}));M[0].fixed=!0,M[M.length-1].fixed="right";var Y={bordered:!0,loading:s,size:"small",title:function(){return(0,u.jsx)(rt,{addNewModalRef:F,selected:f,deleteData:B,qData:C,setQData:S,list:P})},showHeader:!0,footer:function(){return(0,u.jsx)(q,{qData:C,setQData:S})},rowSelection:{onChange:function(e){v(e)}},tableLayout:void 0};return(0,a.useEffect)((function(){P(),Le.listUser().then((function(e){R(e.data||[])})).catch((function(e){E("Product data not loaded","error")})),O.listUser().then((function(e){A(e.data||[])})).catch((function(e){E("User data not loaded","error")}))}),[C.page,C.limit]),(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(j.Z.Title,{level:5,style:{marginTop:0},children:"List of Offer"}),(0,u.jsx)(g.Z,(0,p.Z)((0,p.Z)({},Y),{},{pagination:{position:["none"],pageSize:C.limit},columns:M,dataSource:n.length?n:[],scroll:{y:"calc(100vh - 340px)",x:"calc(100vw - 387px)"}})),(0,u.jsx)(lt,{ref:F,list:P,product:w,user:L})]})}function rt(e){var t=e.addNewModalRef,n=e.selected,a=e.deleteData,i=e.qData,r=(e.setQData,e.list);return(0,u.jsx)(v.Z,{onSubmitCapture:r,className:"search-form",children:(0,u.jsxs)(y.Z,{gutter:[12,2],children:[(0,u.jsx)(b.Z,{xs:24,xl:4,children:(0,u.jsx)(v.Z.Item,{style:{marginBottom:0},children:(0,u.jsx)(C.Z,{placeholder:"Search by title",value:i.key,onChange:function(e){return t=e.target.value,i[n="key"]=t,void(void 0!==t&&""!==t||(delete i[n],r()));var t,n},allowClear:!0})})}),(0,u.jsx)(b.Z,{span:3,children:(0,u.jsx)(v.Z.Item,{style:{marginBottom:0},children:(0,u.jsx)(d.Z,{type:"primary",htmlType:"submit",children:"Search"})})}),(0,u.jsxs)(b.Z,{span:5,children:[(0,u.jsx)(v.Z.Item,{style:{marginBottom:0,float:"right"},children:(0,u.jsx)(d.Z,{type:"primary",icon:(0,u.jsx)(R.Z,{}),onClick:function(){t.current.openForm()},children:"Add New"})}),n.length?(0,u.jsx)(Z.Z,{title:"Are you sure to delete these selected images?. Be sure to delete the image from server.",onConfirm:function(){a(n)},okText:"Yes",cancelText:"No",children:(0,u.jsx)(d.Z,{type:"primary",danger:!0,style:{float:"right"},icon:(0,u.jsx)(D.Z,{}),children:"Delete Selected"})}):null]})]})})}at.baseURL="offer";var lt=(0,a.forwardRef)((function(e,t){var n=e.list,i=e.product,r=(0,a.useState)(!1),l=(0,x.Z)(r,2),s=l[0],o=l[1],c=(0,a.useState)({aspect:1}),h=(0,x.Z)(c,2),f=h[0],m=h[1],Z=(0,a.useState)(!1),j=(0,x.Z)(Z,2),g=j[0],D=j[1],T=(0,a.useState)([]),R=(0,x.Z)(T,2),_=R[0],L=R[1],A=function(e){m((0,p.Z)((0,p.Z)({},f),e))};(0,a.useImperativeHandle)(t,(function(){return{openForm:function(e){var t;o(!0),m(e?(0,p.Z)({},e):{fileType:"photo"}),null!==(t=e.img)&&void 0!==t&&t.url?L([e.img]):L([])}}}));var F=function(){D(!0),at.save(f).then((function(e){E(e.message),A((0,p.Z)({},e.data)),n(),o(!1)})).catch((function(e){"object"===typeof e.message?E(e.message[Object.keys(e.message)[0]],"error"):E(e.message,"error")})).finally((function(){D(!1)}))};return(0,a.useEffect)((function(){f._id||A({slug:H.Z.removeSpecialChars(f.title)})}),[f.title]),(0,a.useEffect)((function(){console.log("---",_),m((0,p.Z)((0,p.Z)({},f),{},{img:null===_||void 0===_?void 0:_[0]}))}),[_]),(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(I.Z,{title:(f._id?"Edit":"Add")+" Offer",style:{top:20},open:s,okText:"Save",onOk:F,okButtonProps:{disabled:g},onCancel:function(){o(!1)},destroyOnClose:!0,maskClosable:!1,width:800,className:"app-modal-body",footer:[(0,u.jsx)(d.Z,{onClick:function(){o(!1)},children:"Cancel"},"cancel"),(0,u.jsx)(d.Z,{type:"primary",onClick:F,children:"Save"},"save")],children:(0,u.jsx)(k.Z,{spinning:g,indicator:(0,u.jsx)(U.Z,{style:{fontSize:24},spin:!0}),children:(0,u.jsx)(v.Z,{layout:"vertical",children:(0,u.jsxs)(y.Z,{gutter:[12,2],children:[(0,u.jsx)(b.Z,{span:12,children:(0,u.jsx)(v.Z.Item,{label:"Title",required:!0,children:(0,u.jsx)(C.Z,{placeholder:"Title",value:f.title,onChange:function(e){A({title:e.target.value})}})})}),(0,u.jsx)(b.Z,{span:12,children:(0,u.jsx)(v.Z.Item,{label:"Slug",required:!0,children:(0,u.jsx)(C.Z,{placeholder:"Slug",value:f.slug,onChange:function(e){A({slug:H.Z.removeSpecialChars(e.target.value)})}})})}),(0,u.jsx)(b.Z,{span:8,children:(0,u.jsx)(v.Z.Item,{label:"Discount Percent",required:!0,children:(0,u.jsx)(C.Z,{placeholder:"Discount Percent",value:f.discountPercent,onChange:function(e){A({discountPercent:e.target.value})}})})}),(0,u.jsx)(b.Z,{span:8,children:(0,u.jsx)(v.Z.Item,{label:"Max Discount Value",required:!0,children:(0,u.jsx)(C.Z,{placeholder:"Max Discount Amount",value:f.maxDiscountValue,onChange:function(e){A({maxDiscountValue:e.target.value})}})})}),(0,u.jsx)(b.Z,{span:8,children:(0,u.jsx)(v.Z.Item,{label:"Minimun Order Value",required:!0,children:(0,u.jsx)(C.Z,{placeholder:" Minimun Order Amount",value:f.minimunOrderPrice,onChange:function(e){A({minimunOrderPrice:e.target.value})}})})}),(0,u.jsx)(b.Z,{span:12,children:(0,u.jsx)(v.Z.Item,{label:"Status",required:!0,children:(0,u.jsxs)(S.Z,{value:f.status,onChange:function(e){A({status:e})},children:[(0,u.jsx)(S.Z.Option,{value:!0,children:"Active"}),(0,u.jsx)(S.Z.Option,{value:!1,children:"Inactive"})]})})}),(0,u.jsx)(b.Z,{span:12,children:(0,u.jsx)(v.Z.Item,{label:"Product",required:!0,children:(0,u.jsx)(S.Z,{mode:"multiple",value:f.productIds,onChange:function(e){A({productIds:e})},options:i.map((function(e){return{value:e._id,label:e.name}}))})})}),(0,u.jsx)(b.Z,{span:6,children:(0,u.jsx)(v.Z.Item,{label:"Duration",required:!0,children:(0,u.jsx)(w.Z.RangePicker,{format:"DD MMM YYYY",value:f.startDate&&f.endDate&&[Y()(f.startDate),Y()(f.endDate)],onChange:function(e){A({startDate:null!==e&&void 0!==e&&e[0]?new Date(null===e||void 0===e?void 0:e[0]):null,endDate:null!==e&&void 0!==e&&e[1]?new Date(null===e||void 0===e?void 0:e[1]):null})},style:{width:"100%"}})})}),(0,u.jsx)(b.Z,{span:6,children:(0,u.jsx)(v.Z.Item,{label:"Photo",children:(0,u.jsx)(fe,{fileList:_,setFileList:L,count:1,listType:"picture"})})})]})})})})})}));function st(e){var t=e.parentId,n=(0,a.useState)([]),i=(0,x.Z)(n,2),r=i[0],l=i[1],s=(0,a.useState)(!1),o=(0,x.Z)(s,2),c=o[0],h=o[1],f=(0,a.useState)([]),v=(0,x.Z)(f,2),y=v[0],b=v[1],C=(0,a.useState)([]),S=(0,x.Z)(C,2),I=S[0],k=S[1],w=(0,a.useState)({page:1,limit:20,parentId:t,type:"addOn"}),R=(0,x.Z)(w,2),U=R[0],_=R[1],L=(0,a.useRef)(),A=(0,a.useRef)(),F=[{title:"#",width:40,render:function(e,t,n){return(0,u.jsx)("b",{children:n+1})}},{title:"Name",dataIndex:"name",width:150},{title:"Slug",dataIndex:"slug",width:100},{title:"Description",dataIndex:"description",width:400,render:function(e){return(0,u.jsx)(j.Z.Text,{ellipsis:{expandable:!0},children:e})}},{title:"Type",dataIndex:"type",render:function(e){return(0,u.jsx)(m.Z,{color:"blue",children:"AddOn"})}},{title:"Status",dataIndex:"status",width:80,render:function(e){return e?(0,u.jsx)(m.Z,{color:"green",children:"Active"}):(0,u.jsx)(m.Z,{color:"red",children:"Inactive"})}},{title:"Action",dataIndex:"_id",width:70,render:function(e,t){return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(Z.Z,{title:"Are you sure to delete this data?",onConfirm:function(){N(t._id)},okText:"Yes",cancelText:"No",children:[(0,u.jsx)(d.Z,{type:"primary",size:"small",danger:!0,icon:(0,u.jsx)(D.Z,{})}),"\xa0"]}),(0,u.jsx)(d.Z,{type:"primary",size:"small",icon:(0,u.jsx)(T.Z,{}),onClick:function(){L.current.openForm(t._id)}})]})}}].filter((function(e){return!e.hidden}));function O(){h(!0),Le.listUser(U).then((function(e){var t;l(null===(t=e.data)||void 0===t?void 0:t.map((function(e){return(0,p.Z)((0,p.Z)({},e),{},{key:e._id})}))),_((0,p.Z)((0,p.Z)({},U),{},{limit:e.extra.limit,page:e.extra.page,total:e.extra.total}))})).catch((function(e){})).finally((function(){h(!1)}))}var N=function(e){Le.deleteUser(e).then((function(e){E(e.message),O(),b([])})).catch((function(e){E(e.message,"error")}))},P=F.map((function(e){return(0,p.Z)((0,p.Z)({},e),{},{ellipsis:!1})}));P[0].fixed=!0,P[P.length-1].fixed="right";var z={bordered:!0,loading:c,size:"small",title:function(){return(0,u.jsx)(ot,{addNewModalRef:L,selected:y,deleteData:N,qData:U,setQData:_,list:O})},showHeader:!0,footer:function(){return(0,u.jsx)(q,{qData:U,setQData:_})},rowSelection:{onChange:function(e){b(e)}},tableLayout:void 0};return(0,a.useEffect)((function(){O(),re.list().then((function(e){k(e.data||[])})).catch((function(e){E("Product data not loaded","error")}))}),[U.page,U.limit]),(0,u.jsxs)(u.Fragment,{children:[t?null:(0,u.jsx)(j.Z.Title,{level:5,style:{marginTop:0},children:"Product List"}),(0,u.jsx)(g.Z,(0,p.Z)((0,p.Z)({},z),{},{pagination:{position:["none"],pageSize:U.limit},columns:P,dataSource:r.length?r:[],scroll:{y:"calc(100vh - 340px)",x:"calc(100vw - 387px)"}})),(0,u.jsx)(ct,{ref:L,list:O,parentId:t,category:I}),(0,u.jsx)(dt,{ref:A,list:O})]})}function ot(e){var t=e.addNewModalRef,n=e.selected,a=e.deleteData,i=e.qData,r=(e.setQData,e.list);return(0,u.jsx)(v.Z,{onSubmitCapture:r,className:"search-form",children:(0,u.jsxs)(y.Z,{gutter:[12,2],children:[(0,u.jsx)(b.Z,{xs:24,xl:4,children:(0,u.jsx)(v.Z.Item,{style:{marginBottom:0},children:(0,u.jsx)(C.Z,{placeholder:"Search by name or code",value:i.key,onChange:function(e){return t=e.target.value,i[n="key"]=t,void(void 0!==t&&""!==t||(delete i[n],r()));var t,n},allowClear:!0})})}),(0,u.jsx)(b.Z,{span:3,children:(0,u.jsx)(v.Z.Item,{style:{marginBottom:0},children:(0,u.jsx)(d.Z,{type:"primary",htmlType:"submit",children:"Search"})})}),(0,u.jsxs)(b.Z,{span:5,children:[(0,u.jsx)(v.Z.Item,{style:{marginBottom:0,float:"right"},children:(0,u.jsx)(d.Z,{type:"primary",icon:(0,u.jsx)(R.Z,{}),onClick:function(){t.current.openForm()},children:"Add New"})}),n.length?(0,u.jsx)(Z.Z,{title:"Are you sure to delete these selected data ?",onConfirm:function(){a(n)},okText:"Yes",cancelText:"No",children:(0,u.jsx)(d.Z,{type:"primary",danger:!0,style:{float:"right"},icon:(0,u.jsx)(D.Z,{}),children:"Delete Selected"})}):null]})]})})}var ct=(0,a.forwardRef)((function(e,t){var n=e.list,i=e.parentId,r=(e.category,(0,a.useState)(!1)),l=(0,x.Z)(r,2),s=l[0],o=l[1],c=(0,a.useState)({aspect:1}),h=(0,x.Z)(c,2),f=h[0],m=h[1],Z=(0,a.useState)(!1),j=(0,x.Z)(Z,2),g=j[0],w=j[1],D=(0,a.useState)([]),T=(0,x.Z)(D,2),R=T[0],_=T[1],L=(0,a.useState)([]),A=(0,x.Z)(L,2),F=A[0],O=A[1],N=function(e,t){for(var n=f,a=t.split("."),i=0;i<a.length;i++)i+1===a.length?n[a[i]]=e:("undefined"===typeof n[a[i]]&&(1*parseInt(a[i+1])>=0?n[a[i]]=[]:n[a[i]]={}),n=n[a[i]]);m((0,p.Z)({},f))};(0,a.useImperativeHandle)(t,(function(){return{openForm:function(e){o(!0),m(e?{_id:e}:{parentId:i,isPremium:!1,isBestSelling:!1,forBirthday:!1,forAnniversary:!1,isBestSellingCombos:!1,variants:[{}]})}}}));var q=function(){w(!0),Le.saveAddOnProduct(f).then((function(e){E(e.message),N((0,p.Z)({},e.data)),n(),o(!1)})).catch((function(e){"object"===typeof e.message?E(e.message[Object.keys(e.message)[0]],"error"):E(e.message,"error")})).finally((function(){w(!1)}))};return(0,a.useEffect)((function(){f._id&&(w(!0),Le.detailUser(f._id).then((function(e){m(e.data||{}),O(e.data.imgs.length?(0,se.Z)(e.data.imgs):[]),_(e.data.thumbImg?[e.data.thumbImg]:[])})).catch((function(e){E(e.message,"error")})).finally((function(){w(!1)})))}),[f._id]),(0,a.useEffect)((function(){f._id||N(H.Z.removeSpecialChars(f.name||""),"slug")}),[f.name]),(0,a.useEffect)((function(){f._id||N(H.Z.removeSpecialChars((null===f||void 0===f?void 0:f.name)||""),"slug")}),[f.name]),(0,a.useEffect)((function(){m((0,p.Z)((0,p.Z)({},f),{},{thumbImg:R[0]}))}),[R]),(0,a.useEffect)((function(){m((0,p.Z)((0,p.Z)({},f),{},{imgs:F}))}),[F]),(0,a.useEffect)((function(){s||m({})}),[s]),(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(I.Z,{title:(f._id?"Edit":"Add New")+" AddOn Product",style:{top:20},open:s,okText:"Save",onOk:q,okButtonProps:{disabled:g},onCancel:function(){o(!1)},destroyOnClose:!0,maskClosable:!1,width:1e3,className:"app-modal-body",footer:[(0,u.jsx)(d.Z,{onClick:function(){o(!1)},children:"Cancel"},"cancel"),(0,u.jsx)(d.Z,{type:"primary",onClick:q,children:"Save"},"save")],children:(0,u.jsx)(k.Z,{spinning:g,indicator:(0,u.jsx)(U.Z,{style:{fontSize:24},spin:!0}),children:(0,u.jsx)(v.Z,{layout:"vertical",children:(0,u.jsxs)(y.Z,{gutter:[12,2],children:[(0,u.jsx)(b.Z,{span:12,children:(0,u.jsx)(v.Z.Item,{label:"Name",required:!0,children:(0,u.jsx)(C.Z,{placeholder:"Name",value:f.name,onChange:function(e){N(e.target.value,"name")}})})}),(0,u.jsx)(b.Z,{span:12,children:(0,u.jsx)(v.Z.Item,{label:"Slug",required:!0,children:(0,u.jsx)(C.Z,{placeholder:"Slug",value:f.slug,onChange:function(e){N(H.Z.removeSpecialChars(e.target.value),"slug")}})})}),(0,u.jsx)(b.Z,{span:12,children:(0,u.jsx)(v.Z.Item,{label:"Description",required:!0,children:(0,u.jsx)(C.Z.TextArea,{rows:4,placeholder:"Description",value:f.description,onChange:function(e){N(H.Z.removeSpecialChars(e.target.value),"description")}})})}),(0,u.jsx)(b.Z,{span:12,children:(0,u.jsx)(v.Z.Item,{label:"Type",required:!0,children:(0,u.jsxs)(S.Z,{value:f.type,onChange:function(e){N(e,"type")},children:[(0,u.jsx)(S.Z.Option,{value:"addOn",children:"AddOn"}),(0,u.jsx)(S.Z.Option,{value:"product",children:"Product"})]})})}),(0,u.jsx)(b.Z,{span:12,children:(0,u.jsx)(v.Z.Item,{label:"Status",required:!0,children:(0,u.jsxs)(S.Z,{value:f.status,onChange:function(e){N(e,"status")},children:[(0,u.jsx)(S.Z.Option,{value:!0,children:"Active"}),(0,u.jsx)(S.Z.Option,{value:!1,children:"Inactive"})]})})}),(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)(ut,{variantDetails:f.variants,parentKay:"variants",handleChange:N})}),(0,u.jsx)(Je.Z,{}),(0,u.jsx)("br",{}),(0,u.jsx)(b.Z,{span:4,children:(0,u.jsx)(v.Z.Item,{label:"Thumbnail Photo",children:(0,u.jsx)(fe,{fileList:R,setFileList:_})})}),(0,u.jsx)(b.Z,{span:20,children:(0,u.jsx)(v.Z.Item,{label:"Photo",children:(0,u.jsx)(fe,{fileList:F,setFileList:O,count:20})})})]})})})})})})),dt=(0,a.forwardRef)((function(e,t){var n=(0,a.useState)(!1),i=(0,x.Z)(n,2),r=i[0],l=i[1],s=(0,a.useState)({aspect:1}),o=(0,x.Z)(s,2),c=o[0],d=o[1];return(0,a.useImperativeHandle)(t,(function(){return{openForm:function(e){l(!0),d((0,p.Z)({},e))}}})),(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(I.Z,{title:c._id?"Variants of ".concat(c.name):"Add User of ".concat(c.name),style:{top:20},open:r,okText:"Save",onCancel:function(){l(!1)},destroyOnClose:!0,maskClosable:!1,width:1200,className:"app-modal-body",children:(0,u.jsx)(Ce,{productId:c._id})})})}));function ut(e){var t=e.variantDetails,n=e.parentKay,i=e.handleChange;return(0,a.useEffect)((function(){console.log(n,"variants"===n)}),[n]),(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{children:(0,u.jsx)(Je.Z,{orientation:"left",children:"variants"===n?"Variants":"Variant"})}),(0,u.jsxs)(y.Z,{children:[(0,u.jsx)(b.Z,{span:4,children:(0,u.jsx)("label",{className:"req",children:"Weight"})}),(0,u.jsx)(b.Z,{span:4,children:(0,u.jsx)("label",{className:"req",children:"Price"})}),(0,u.jsx)(b.Z,{span:8,children:(0,u.jsx)("label",{className:"req",children:"Actual Price (In \u20b9)"})})]}),null===t||void 0===t?void 0:t.map((function(e,t){return(0,u.jsx)(a.Fragment,{children:(0,u.jsxs)(y.Z,{children:[(0,u.jsx)(b.Z,{span:4,children:(0,u.jsx)(C.Z,{placeholder:"Weight",value:e.weight,onChange:function(e){i(e.target.value,"".concat(n,".").concat(t,".weight"))}})}),(0,u.jsx)(b.Z,{span:4,children:(0,u.jsx)(C.Z,{placeholder:"Price",value:e.price,onChange:function(e){i(H.Z.handleInteger(e.target.value),"".concat(n,".").concat(t,".price"))}})}),(0,u.jsx)(b.Z,{span:8,children:(0,u.jsx)(C.Z,{placeholder:"Actual Price",value:e.actualPrice,onChange:function(e){i(H.Z.handleFloat(e.target.value),"".concat(n,".").concat(t,".actualPrice"))}})})]})},t)}))]})}var ht=function(){function e(){(0,_.Z)(this,e)}return(0,L.Z)(e,null,[{key:"list",value:function(e){return A.Z.get(this.baseURL+"/list",{params:e})}},{key:"save",value:function(e,t){return A.Z.post(this.baseURL+"/save",e,{params:t})}},{key:"delete",value:function(e){return A.Z.post(this.baseURL+"/delete",{ids:e})}},{key:"details",value:function(e){return A.Z.get(this.baseURL+"/details/"+e)}}]),e}();function ft(){var e=(0,a.useState)([]),t=(0,x.Z)(e,2),n=t[0],i=t[1],r=(0,a.useState)(!1),l=(0,x.Z)(r,2),s=l[0],o=l[1],c=(0,a.useState)([]),h=(0,x.Z)(c,2),f=h[0],v=h[1],y=(0,a.useState)({page:1,limit:20}),b=(0,x.Z)(y,2),C=b[0],S=b[1],I=(0,a.useRef)(),k=(0,a.useState)([]),w=(0,x.Z)(k,2),R=w[0],U=w[1],_=(0,a.useState)([]),L=(0,x.Z)(_,2),A=L[0],F=L[1],O=(0,a.useState)([]),N=(0,x.Z)(O,2),P=N[0],z=N[1],B=(0,a.useState)([]),M=(0,x.Z)(B,2),Y=M[0],H=M[1],Q=[{title:"#",width:40,render:function(e,t,n){return(0,u.jsx)("b",{children:n+1})}},{title:"Product ",dataIndex:"productDetails",render:function(e){return e.map((function(e){return(0,u.jsx)(m.Z,{children:e.name})}))}},{title:"Categories ",dataIndex:"categoryDetails",render:function(e){return e.map((function(e){return(0,u.jsx)(m.Z,{children:e.name})}))}},{title:"Banners ",dataIndex:"bannerDetails",render:function(e){return e.map((function(e){return(0,u.jsx)(ie.Z,{src:null===e||void 0===e?void 0:e.imgUrl,height:80})}))}},{title:"Offer ",dataIndex:"offerDetails",render:function(e){return e.map((function(e){return(0,u.jsx)(m.Z,{children:e.title})}))}},{title:"Display Order",dataIndex:"displayOrder",width:250},{title:"Display Type",dataIndex:"displayType",width:250},{title:"Slug",dataIndex:"slug",width:150},{title:"Action",dataIndex:"_id",width:70,render:function(e,t){return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(Z.Z,{title:"Are you sure to delete this data?",onConfirm:function(){W(t._id)},okText:"Yes",cancelText:"No",children:[(0,u.jsx)(d.Z,{type:"primary",size:"small",danger:!0,icon:(0,u.jsx)(D.Z,{})}),"\xa0"]}),(0,u.jsx)(d.Z,{type:"primary",size:"small",icon:(0,u.jsx)(T.Z,{}),onClick:function(){I.current.openForm(t)}})]})}}].filter((function(e){return!e.hidden}));function V(){o(!0),ht.list(C).then((function(e){var t;i(null===(t=e.data)||void 0===t?void 0:t.map((function(e){return(0,p.Z)((0,p.Z)({},e),{},{key:e._id})}))),S((0,p.Z)((0,p.Z)({},C),{},{limit:e.extra.limit,page:e.extra.page,total:e.extra.total}))})).catch((function(e){})).finally((function(){o(!1)}))}(0,a.useEffect)((function(){V()}),[]);var W=function(e){ht.delete(e).then((function(e){E(e.message),V(),v([])})).catch((function(e){E(e.message,"error")}))},J=Q.map((function(e){return(0,p.Z)((0,p.Z)({},e),{},{ellipsis:!1})}));J[0].fixed=!0,J[J.length-1].fixed="right";var K={bordered:!0,loading:s,size:"small",title:function(){return(0,u.jsx)(pt,{addNewModalRef:I,selected:f,deleteData:W,qData:C,setQData:S,list:V})},showHeader:!0,footer:function(){return(0,u.jsx)(q,{qData:C,setQData:S})},rowSelection:{onChange:function(e){v(e)}},tableLayout:void 0};return(0,a.useEffect)((function(){Le.listUser({isAll:1}).then((function(e){U(e.data.map((function(e){return(0,p.Z)((0,p.Z)({},e),{},{label:e.name,value:e._id})})))})),at.list({isAll:1}).then((function(e){z(e.data.map((function(e){return(0,p.Z)((0,p.Z)({},e),{},{label:e.title,value:e._id})})))})),re.list({isAll:1}).then((function(e){F(e.data.map((function(e){return(0,p.Z)((0,p.Z)({},e),{},{label:e.name,value:e._id})})))})),je.bannerList({isAll:1}).then((function(e){H(e.data.map((function(e){return(0,p.Z)((0,p.Z)({},e),{},{label:e.name,value:e._id})})))}))}),[C.page,C.limit]),(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(j.Z.Title,{level:5,style:{marginTop:0},children:"Product List"}),(0,u.jsx)(g.Z,(0,p.Z)((0,p.Z)({},K),{},{pagination:{position:["none"],pageSize:C.limit},columns:J,dataSource:n.length?n:[],scroll:{y:"calc(100vh - 340px)",x:"calc(100vw - 387px)"}})),(0,u.jsx)(xt,{ref:I,list:V,allProduct:R,allBanners:Y,allCategories:A,allOffers:P})]})}function pt(e){var t=e.addNewModalRef,n=e.selected,a=e.deleteData,i=e.qData,r=e.setQData,l=e.list;return(0,u.jsx)(v.Z,{onSubmitCapture:l,className:"search-form",children:(0,u.jsxs)(y.Z,{gutter:[12,2],children:[(0,u.jsx)(b.Z,{span:4,children:(0,u.jsx)(v.Z.Item,{style:{marginBottom:0},children:(0,u.jsx)(C.Z,{placeholder:"Search by name or code",value:i.key,onChange:function(e){return r((0,p.Z)((0,p.Z)({},i),{},{key:e.target.value}))},allowClear:!0})})}),(0,u.jsx)(b.Z,{span:3,children:(0,u.jsx)(v.Z.Item,{style:{marginBottom:0},children:(0,u.jsx)(d.Z,{type:"primary",htmlType:"submit",children:"Search"})})}),(0,u.jsxs)(b.Z,{span:5,children:[(0,u.jsx)(v.Z.Item,{style:{marginBottom:0,float:"right"},children:(0,u.jsx)(d.Z,{type:"primary",icon:(0,u.jsx)(R.Z,{}),onClick:function(){t.current.openForm()},children:"Add New"})}),n.length?(0,u.jsx)(Z.Z,{title:"Are you sure to delete these selected data ?",onConfirm:function(){a(n)},okText:"Yes",cancelText:"No",children:(0,u.jsx)(d.Z,{type:"primary",danger:!0,style:{float:"right"},icon:(0,u.jsx)(D.Z,{}),children:"Delete Selected"})}):null]})]})})}ht.baseURL="homepageitems";var xt=(0,a.forwardRef)((function(e,t){var n=e.list,i=e.allProduct,r=e.allBanners,l=e.allCategories,s=e.allOffers,o=(0,a.useState)(!1),c=(0,x.Z)(o,2),h=c[0],f=c[1],m=(0,a.useState)({aspect:1}),Z=(0,x.Z)(m,2),j=Z[0],g=Z[1],w=(0,a.useState)(!1),D=(0,x.Z)(w,2),T=D[0],R=D[1],_=function(e,t){for(var n=j,a=t.split("."),i=0;i<a.length;i++)i+1===a.length?n[a[i]]=e:("undefined"===typeof n[a[i]]&&(1*parseInt(a[i+1])>=0?n[a[i]]=[]:n[a[i]]={}),n=n[a[i]]);g((0,p.Z)({},j))};(0,a.useImperativeHandle)(t,(function(){return{openForm:function(e){f(!0),g(e?(0,p.Z)({},e):{})}}}));var L=function(){R(!0),ht.save(j).then((function(e){E(e.message),_((0,p.Z)({},e.data)),n(),f(!1)})).catch((function(e){"object"===typeof e.message?E(e.message[Object.keys(e.message)[0]],"error"):E(e.message,"error")})).finally((function(){R(!1)}))};return(0,a.useEffect)((function(){j._id&&(R(!0),ht.details(j._id).then((function(e){g(e.data||{})})).catch((function(e){E(e.message,"error")})).finally((function(){R(!1)})))}),[j._id]),(0,a.useEffect)((function(){j._id||_(H.Z.removeSpecialChars(j.slug||""),"slug")}),[j.slug]),(0,a.useEffect)((function(){h||g({})}),[h]),(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(I.Z,{title:(j._id?"Edit":"Add New")+" Product",style:{top:20},open:h,okText:"Save",onOk:L,okButtonProps:{disabled:T},onCancel:function(){f(!1)},destroyOnClose:!0,maskClosable:!1,width:1e3,className:"app-modal-body",footer:[(0,u.jsx)(d.Z,{onClick:function(){f(!1)},children:"Cancel"},"cancel"),(0,u.jsx)(d.Z,{type:"primary",onClick:L,children:"Save"},"save")],children:(0,u.jsx)(k.Z,{spinning:T,indicator:(0,u.jsx)(U.Z,{style:{fontSize:24},spin:!0}),children:(0,u.jsx)(v.Z,{layout:"vertical",children:(0,u.jsxs)(y.Z,{gutter:[12,2],children:[(0,u.jsx)(b.Z,{span:12,children:(0,u.jsx)(v.Z.Item,{label:"Type",required:!0,children:(0,u.jsxs)(S.Z,{value:j.type,onChange:function(e){_(e,"type")},children:[(0,u.jsx)(S.Z.Option,{value:"category",children:"Category"}),(0,u.jsx)(S.Z.Option,{value:"banner",children:"Banner"}),(0,u.jsx)(S.Z.Option,{value:"offer",children:"Offer"}),(0,u.jsx)(S.Z.Option,{value:"products",children:"Products"})]})})}),"products"===j.type&&(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)(v.Z.Item,{label:"Choose Product",required:!0,children:(0,u.jsx)(S.Z,{mode:"multiple",placeholder:"Choose Products",onChange:function(e){_(e,"productIds")},optionLabelProp:"label",allowClear:!0,value:j.productIds,options:i.filter((function(e){return!0}))})})}),"banner"===j.type&&(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)(v.Z.Item,{label:"Choose Banners",required:!0,children:(0,u.jsx)(S.Z,{mode:"multiple",placeholder:"Choose Banners",onChange:function(e){_(e,"bannerIds")},optionLabelProp:"label",allowClear:!0,value:j.bannerIds,options:r.filter((function(e){return!0}))})})}),"category"===j.type&&(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)(v.Z.Item,{label:"Choose Categories",required:!0,children:(0,u.jsx)(S.Z,{mode:"multiple",placeholder:"Choose Categories",onChange:function(e){_(e,"categoryIds")},optionLabelProp:"label",allowClear:!0,value:j.categoryIds,options:l.filter((function(e){return!0}))})})}),"offer"===j.type&&(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)(v.Z.Item,{label:"Choose Offers",required:!0,children:(0,u.jsx)(S.Z,{mode:"multiple",placeholder:"Choose Offers",onChange:function(e){_(e,"offerIds")},optionLabelProp:"label",allowClear:!0,value:j.offerIds,options:s.filter((function(e){return!0}))})})}),(0,u.jsx)(b.Z,{span:12,children:(0,u.jsx)(v.Z.Item,{label:"Title",children:(0,u.jsx)(C.Z,{placeholder:"title",value:j.title,onChange:function(e){_(e.target.value,"title")}})})}),(0,u.jsx)(b.Z,{span:12,children:(0,u.jsx)(v.Z.Item,{label:"Slug",required:!0,children:(0,u.jsx)(C.Z,{placeholder:"slug",value:j.slug,onChange:function(e){_(H.Z.removeSpecialChars(e.target.value),"slug")}})})}),(0,u.jsx)(b.Z,{span:12,children:(0,u.jsx)(v.Z.Item,{label:"Display Order",required:!0,children:(0,u.jsx)(C.Z,{placeholder:"1",type:"number",value:j.displayOrder,onChange:function(e){_(e.target.value,"displayOrder")}})})}),(0,u.jsx)(b.Z,{span:12,children:(0,u.jsx)(v.Z.Item,{label:"Display Type",required:!0,children:(0,u.jsxs)(S.Z,{value:j.displayType,onChange:function(e){_(e,"displayType")},children:[(0,u.jsx)(S.Z.Option,{value:"grid",children:"Grid"}),(0,u.jsx)(S.Z.Option,{value:"scroll",children:"Scroll"})]})})}),(0,u.jsx)(b.Z,{span:12,children:(0,u.jsx)(v.Z.Item,{label:"Status",required:!0,children:(0,u.jsxs)(S.Z,{value:j.status,onChange:function(e){_(e,"status")},children:[(0,u.jsx)(S.Z.Option,{value:!0,children:"Active"}),(0,u.jsx)(S.Z.Option,{value:!1,children:"Inactive"})]})})})]})})})})})})),mt=function(){function e(){(0,_.Z)(this,e)}return(0,L.Z)(e,null,[{key:"list",value:function(e){return A.Z.get("ecommerce/order/list",{params:e})}},{key:"save",value:function(e,t){return A.Z.post("ecommerce/order/save",e,{params:t})}},{key:"delete",value:function(e){return A.Z.post("ecommerce/order/delete",{ids:e})}},{key:"details",value:function(e){return A.Z.get("ecommerce/order/details/"+e)}}]),e}();mt.baseURL="";var Zt=function(){function e(){(0,_.Z)(this,e)}return(0,L.Z)(e,null,[{key:"list",value:function(e){return A.Z.get("ecommerce/order/orderDetail/list",{params:e})}},{key:"details",value:function(e){return A.Z.get("ecommerce/order/orderDetail/detail/:_id"+e)}}]),e}();function jt(e){var t=e.type,n=e.orderId,i=void 0===n?null:n,r=(0,a.useState)([]),l=(0,x.Z)(r,2),s=l[0],o=l[1],c=(0,a.useState)(!1),d=(0,x.Z)(c,2),h=d[0],f=d[1],m=(0,a.useState)([]),Z=(0,x.Z)(m,2),j=Z[0],v=Z[1],y=(0,a.useState)({page:1,limit:20,type:t,orderId:i}),b=(0,x.Z)(y,2),C=b[0],S=b[1];console.log(C);var I=(0,a.useRef)(),k=[{title:"Cat Id",dataIndex:"productVariantDetails",width:250,render:function(e){return null===e||void 0===e?void 0:e.catId}},{title:"Product Name",dataIndex:"productDetails",width:250,render:function(e){return(0,u.jsx)("span",{children:null===e||void 0===e?void 0:e.name})}},{title:"Price",dataIndex:"productVariantDetails",width:140,render:function(e){return(0,u.jsxs)("span",{children:["\u20b9",null===e||void 0===e?void 0:e.price]})}},{title:"With Discount Price",dataIndex:"productVariantDetails",width:140,render:function(e){return(0,u.jsxs)("span",{children:["\u20b9",(null===e||void 0===e?void 0:e.withDiscountPrice)||(null===e||void 0===e?void 0:e.price)]})}}].filter((function(e){return!e.hidden}));function w(){f(!0),Zt.list(C).then((function(e){var t;o(null===(t=e.data)||void 0===t?void 0:t.map((function(e){return(0,p.Z)((0,p.Z)({},e),{},{key:e._id})}))),S((0,p.Z)((0,p.Z)({},C),{},{limit:e.extra.limit,page:e.extra.page,total:e.extra.total}))})).catch((function(e){})).finally((function(){f(!1)}))}var D=function(e){Zt.orderDetailDelete(e).then((function(e){E(e.message),w(),v([])})).catch((function(e){E(e.message,"error")}))},T=k.map((function(e){return(0,p.Z)((0,p.Z)({},e),{},{ellipsis:!1})}));T[0].fixed=!0,T[T.length-1].fixed="right";var R={bordered:!0,loading:h,size:"small",title:function(){return(0,u.jsx)(gt,{addNewModalRef:I,selected:j,deleteData:D,qData:C,setQData:S,list:w})},showHeader:!0,footer:function(){return(0,u.jsx)(q,{qData:C,setQData:S})},rowSelection:{onChange:function(e){v(e)}},tableLayout:void 0};return(0,a.useEffect)((function(){w()}),[C.page,C.limit]),(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(g.Z,(0,p.Z)((0,p.Z)({},R),{},{pagination:{position:["none"],pageSize:C.limit},columns:T,dataSource:s.length?s:[]})),(0,u.jsx)(vt,{ref:I,list:w,type:t,orderId:i})]})}function gt(e){e.addNewModalRef;var t=e.selected,n=e.deleteData,a=(e.qData,e.setQData,e.list);return(0,u.jsx)(v.Z,{onSubmitCapture:a,className:"search-form",children:(0,u.jsxs)(y.Z,{gutter:[12,2],children:[(0,u.jsx)(b.Z,{span:3,children:(0,u.jsx)(v.Z.Item,{style:{marginBottom:0},children:(0,u.jsx)(d.Z,{type:"primary",htmlType:"submit",children:"Reload"})})}),(0,u.jsx)(b.Z,{span:5,children:t.length?(0,u.jsx)(Z.Z,{title:"Are you sure to delete these selected product attributes ?",onConfirm:function(){n(t)},okText:"Yes",cancelText:"No",children:(0,u.jsx)(d.Z,{type:"primary",danger:!0,style:{float:"right"},icon:(0,u.jsx)(D.Z,{}),children:"Delete Selected"})}):null})]})})}Zt.baseURL="";var vt=(0,a.forwardRef)((function(e,t){var n,i=e.list,r=e.orderId,l=(0,a.useState)(!1),s=(0,x.Z)(l,2),o=s[0],c=s[1],h=(0,a.useState)({aspect:1}),f=(0,x.Z)(h,2),m=f[0],Z=f[1],j=(0,a.useState)(!1),g=(0,x.Z)(j,2),S=g[0],w=g[1],D=(0,a.useState)("en"),T=(0,x.Z)(D,2),R=T[0],_=T[1],L=(0,a.useState)(!1),A=(0,x.Z)(L,2),F=A[0],O=A[1],N=function(e){F&&(Object.entries(e).forEach((function(e){for(var t=m,n=e[0],a=e[1],i=n.split("."),r=0;r<i.length;r++)r+1===i.length?t[i[r]]=a:("undefined"===typeof t[i[r]]&&(1*parseInt(i[r+1])>=0?t[i[r]]=[]:t[i[r]]={}),t=t[i[r]])})),Z((0,p.Z)({},m)))};(0,a.useImperativeHandle)(t,(function(){return{openForm:function(e){c(!0),Z(e?{_id:e}:{orderId:r}),O(!0)}}}));var q=function(){F&&(w(!0),Zt.orderDetailSave(m,{ln:R}).then((function(e){E(e.message),N((0,p.Z)({},e.data)),"en"===R&&i()})).catch((function(e){"object"===typeof e.message?E(e.message[Object.keys(e.message)[0]],"error"):E(e.message,"error")})).finally((function(){w(!1)})))};return(0,a.useEffect)((function(){m._id&&(w(!0),Zt.orderDetailDetails(m._id).then((function(e){Z(e.data||{})})).catch((function(e){E(e.message,"error")})).finally((function(){w(!1)})))}),[R,m._id]),(0,a.useEffect)((function(){o?_("en"):Z({_id:null})}),[o]),(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(I.Z,{title:(m._id?"Edit":"Add")+" Order",style:{top:20},open:o,okText:"Save",onOk:q,okButtonProps:{disabled:S},onCancel:function(){c(!1)},maskClosable:!1,width:900,className:"app-modal-body-overflow",footer:[(0,u.jsx)(d.Z,{onClick:function(){c(!1)},children:"Cancel"},"cancel"),F?(0,u.jsx)(d.Z,{type:"primary",onClick:q,children:"Save"},"save"):null],children:(0,u.jsx)(k.Z,{spinning:S,indicator:(0,u.jsx)(U.Z,{style:{fontSize:24},spin:!0}),children:(0,u.jsx)(v.Z,{layout:"vertical",disabled:!F,children:(0,u.jsxs)(y.Z,{gutter:[12,2],children:[(0,u.jsx)(b.Z,{span:12,children:(0,u.jsx)(v.Z.Item,{label:"Product Id",required:!0,children:(0,u.jsx)(C.Z,{placeholder:"Value",value:null===m||void 0===m?void 0:m._id,disabled:!0})})}),(0,u.jsx)(b.Z,{span:12,children:(0,u.jsx)(v.Z.Item,{label:"Product Name",required:!0,children:(0,u.jsx)(C.Z,{placeholder:"Value",value:null===m||void 0===m||null===(n=m.productId)||void 0===n?void 0:n.name,disabled:!0})})}),(0,u.jsx)(b.Z,{span:12,children:(0,u.jsx)(v.Z.Item,{label:"Price",required:!0,children:(0,u.jsx)(C.Z,{type:"number",placeholder:"Price",value:m.price,onChange:function(e){N({price:e.target.value})}})})}),(0,u.jsx)(b.Z,{span:12,children:(0,u.jsx)(v.Z.Item,{label:"Actual Price",required:!0,children:(0,u.jsx)(C.Z,{type:"number",placeholder:"Actual price",value:m.actualPrice,disabled:!0})})}),(0,u.jsx)(b.Z,{span:12,children:(0,u.jsx)(v.Z.Item,{label:"Quantity",required:!0,children:(0,u.jsx)(C.Z,{type:"number",placeholder:"Quantity",value:m.quantity,onChange:function(e){N({quantity:e.target.value})}})})}),(0,u.jsx)(b.Z,{span:12,children:(0,u.jsx)(v.Z.Item,{label:"Total ",required:!0,children:(0,u.jsx)(C.Z,{type:"number",placeholder:"Total",value:m.total,onChange:function(e){N({total:e.target.value})}})})})]})})})})})}));function yt(e){var t=e.type,n=e.categoryId,i=void 0===n?null:n,r=(0,a.useState)([]),l=(0,x.Z)(r,2),s=l[0],o=l[1],c=(0,a.useState)(!1),h=(0,x.Z)(c,2),f=h[0],Z=h[1],v=(0,a.useState)([]),y=(0,x.Z)(v,2),b=y[0],C=y[1],S=(0,a.useState)({page:1,limit:20,type:t,categoryId:i}),I=(0,x.Z)(S,2),k=I[0],w=I[1],D=(0,a.useRef)(),T=[{title:"Order id",dataIndex:"orderId"},{title:"Shipping Address",dataIndex:"addressDetails",width:250,render:function(e){var t=JSON.parse(e);return null==t?(0,u.jsx)("span",{children:"Not Mentioned"}):(0,u.jsx)("span",{children:(null===t||void 0===t?void 0:t.street1)+" "+(null===t||void 0===t?void 0:t.street2)+" "+(null===t||void 0===t?void 0:t.city)+" "+(null===t||void 0===t?void 0:t.state)+" "+(null===t||void 0===t?void 0:t.pin)})}},{title:"Total Amount",dataIndex:"priceDetails",width:140,render:function(e){return(0,u.jsxs)("span",{children:["\u20b9",e.finalPrice]})}},{title:"Details",dataIndex:"orderId",width:150,render:function(e,t){return(0,u.jsx)(d.Z,{type:"primary",size:"small",onClick:function(){D.current.openForm({orderId:t.orderId})},children:"Order Details"})}},{title:"Status",dataIndex:"status",width:200,render:function(e,t){var n=t.status;return(0,u.jsx)(m.Z,{color:"green",children:n})}}].filter((function(e){return!e.hidden}));function R(){Z(!0),mt.list(k).then((function(e){var t;o(null===(t=e.data)||void 0===t?void 0:t.map((function(e){return(0,p.Z)((0,p.Z)({},e),{},{key:e._id})}))),w((0,p.Z)((0,p.Z)({},k),{},{limit:e.extra.limit,page:e.extra.page,total:e.extra.total}))})).catch((function(e){})).finally((function(){Z(!1)}))}var U=function(e){mt.delete(e).then((function(e){E(e.message),R(),C([])})).catch((function(e){E(e.message,"error")}))},_=T.map((function(e){return(0,p.Z)((0,p.Z)({},e),{},{ellipsis:!1})}));_[0].fixed=!0,_[_.length-1].fixed="right";var L={bordered:!0,loading:f,size:"small",title:function(){return(0,u.jsx)(bt,{selected:b,deleteData:U,qData:k,setQData:w,list:R,categoryId:i})},showHeader:!0,footer:function(){return(0,u.jsx)(q,{qData:k,setQData:w})},rowSelection:{onChange:function(e){C(e)}},tableLayout:void 0};return(0,a.useEffect)((function(){R()}),[k.page,k.limit]),(0,u.jsxs)(u.Fragment,{children:[i?null:(0,u.jsx)(j.Z.Title,{level:5,children:"List of Orders"}),(0,u.jsx)(g.Z,(0,p.Z)((0,p.Z)({},L),{},{pagination:{position:["none"],pageSize:k.limit},columns:_,dataSource:s.length?s:[],scroll:{y:"calc(100vh - 340px)",x:"calc(100vw - 387px)"}})),(0,u.jsx)(Ct,{ref:D})]})}function bt(e){var t=e.selected,n=e.deleteData,a=e.qData,i=(e.setQData,e.list);return(0,u.jsx)(v.Z,{onSubmitCapture:i,className:"search-form",children:(0,u.jsxs)(y.Z,{gutter:[12,2],children:[(0,u.jsx)(b.Z,{span:4,children:(0,u.jsx)(v.Z.Item,{style:{marginBottom:0},children:(0,u.jsx)(C.Z,{placeholder:"Search by order id",value:a.key,onChange:function(e){return t=e.target.value,a[n="key"]=t,void(void 0!==t&&""!==t||(delete a[n],i()));var t,n},allowClear:!0})})}),(0,u.jsx)(b.Z,{span:3,children:(0,u.jsx)(v.Z.Item,{style:{marginBottom:0},children:(0,u.jsx)(d.Z,{type:"primary",htmlType:"submit",children:"Search"})})}),(0,u.jsx)(b.Z,{span:5,children:t.length?(0,u.jsx)(Z.Z,{title:"Are you sure to delete these selected Order?",onConfirm:function(){n(t)},okText:"Yes",cancelText:"No",children:(0,u.jsx)(d.Z,{type:"primary",danger:!0,style:{float:"right"},icon:(0,u.jsx)(D.Z,{}),children:"Delete Selected"})}):null})]})})}var Ct=(0,a.forwardRef)((function(e,t){var n=(0,a.useState)(!1),i=(0,x.Z)(n,2),r=i[0],l=i[1],s=(0,a.useState)({aspect:1}),o=(0,x.Z)(s,2),c=o[0],d=o[1];return(0,a.useImperativeHandle)(t,(function(){return{openForm:function(e){l(!0),d(e)}}})),(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(I.Z,{title:(0,u.jsxs)(u.Fragment,{children:["Details of Order:"," ",(0,u.jsx)(j.Z.Text,{type:"danger",children:c.orderId})]}),style:{top:20},open:r,okText:"Save",onCancel:function(){l(!1)},maskClosable:!1,width:1200,destroyOnClose:!0,className:"app-modal-body-overflow",footer:null,children:(0,u.jsx)(jt,{type:c.type,orderId:c.orderId})})})}));function St(e){var t=e.type,n=(0,a.useState)([]),i=(0,x.Z)(n,2),r=i[0],l=i[1],s=(0,a.useState)(!1),o=(0,x.Z)(s,2),c=o[0],h=o[1],f=(0,a.useState)([]),m=(0,x.Z)(f,2),v=m[0],y=m[1],b=(0,a.useState)({page:1,limit:20}),C=(0,x.Z)(b,2),S=C[0],I=C[1],k=(0,a.useRef)(),w=[{title:"#",width:30,render:function(e,t,n){return(0,u.jsx)("b",{children:n+1})}},{title:"name",dataIndex:"name"},{title:"Action",dataIndex:"_id",width:70,render:function(e,t){return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(Z.Z,{title:"Are you sure to delete this specialization?",onConfirm:function(){U(t._id)},okText:"Yes",cancelText:"No",children:[(0,u.jsx)(d.Z,{type:"primary",size:"small",danger:!0,icon:(0,u.jsx)(D.Z,{})}),"\xa0"]}),(0,u.jsx)(d.Z,{type:"primary",size:"small",icon:(0,u.jsx)(T.Z,{}),onClick:function(){k.current.openForm(t)}})]})}}].filter((function(e){return!e.hidden}));function R(){h(!0),Xe.typeList((0,p.Z)((0,p.Z)({},S),{},{type:t})).then((function(e){var t;l(null===(t=e.data)||void 0===t?void 0:t.map((function(e){return(0,p.Z)({key:e._id},e)})).reverse()),I((0,p.Z)((0,p.Z)({},S),{},{limit:e.extra.limit,page:e.extra.page,total:e.extra.total}))})).catch((function(e){})).finally((function(){h(!1)}))}var U=function(e){Xe.typeDelete(e).then((function(e){B.ZP.success(e.message),R(),y([])})).catch((function(e){B.ZP.error(e.message)}))},_=w.map((function(e){return(0,p.Z)((0,p.Z)({},e),{},{ellipsis:!1})}));_[0].fixed=!0,_[_.length-1].fixed="right";var L={bordered:!0,loading:c,size:"small",title:function(){return(0,u.jsx)(It,{addNewModalRef:k,selected:v,deleteData:U,qData:S,setQData:I,list:R})},showHeader:!0,footer:function(){return(0,u.jsx)(q,{qData:S,setQData:I})},rowSelection:{onChange:function(e){y(e)}},tableLayout:void 0};return(0,a.useEffect)((function(){R()}),[S.page,S.limit,t]),(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)("div",{style:{padding:"0px 10px",border1:"1px solid black"},children:[(0,u.jsx)(j.Z.Title,{level:5,style:{marginTop:0}}),(0,u.jsx)(g.Z,(0,p.Z)((0,p.Z)({},L),{},{pagination:{position:["none"],pageSize:S.limit},columns:_,dataSource:r.length?r:[],scroll:{y:"calc(100vh - 340px)",x:"calc(100vw - 387px)"}})),(0,u.jsx)(kt,{ref:k,list:R,type:t})]})})}function It(e){var t=e.addNewModalRef,n=e.selected,a=e.deleteData,i=e.qData,r=(e.setQData,e.list);return(0,u.jsx)(v.Z,{onSubmitCapture:r,className:"search-form",children:(0,u.jsxs)(y.Z,{gutter:[12,2],children:[(0,u.jsx)(b.Z,{xs:24,xl:4,children:(0,u.jsx)(v.Z.Item,{style:{marginBottom:0},children:(0,u.jsx)(C.Z,{placeholder:"Search by name",value:i.key,onChange:function(e){return t=e.target.value,i[n="key"]=t,void(void 0!==t&&""!==t||(delete i[n],r()));var t,n},allowClear:!0})})}),(0,u.jsx)(b.Z,{span:3,children:(0,u.jsx)(v.Z.Item,{style:{marginBottom:0},children:(0,u.jsx)(d.Z,{type:"primary",htmlType:"submit",children:"Search"})})}),(0,u.jsxs)(b.Z,{span:5,children:[(0,u.jsx)(v.Z.Item,{style:{marginBottom:0,float:"right"},children:(0,u.jsx)(d.Z,{type:"primary",icon:(0,u.jsx)(R.Z,{}),onClick:function(){t.current.openForm()},children:"Add New"})}),n.length?(0,u.jsx)(Z.Z,{title:"Are you sure to delete these selected images?. Be sure to delete the image from server.",onConfirm:function(){a(n)},okText:"Yes",cancelText:"No",children:(0,u.jsx)(d.Z,{type:"primary",danger:!0,style:{float:"right"},icon:(0,u.jsx)(D.Z,{}),children:"Delete Selected"})}):null]})]})})}var kt=(0,a.forwardRef)((function(e,t){var n=e.list,i=e.type,r=(0,a.useState)(!1),l=(0,x.Z)(r,2),s=l[0],o=l[1],c=(0,a.useState)({aspect:1}),h=(0,x.Z)(c,2),f=h[0],m=h[1],Z=(0,a.useState)(!1),j=(0,x.Z)(Z,2),g=j[0],S=j[1],w=function(e){m((0,p.Z)((0,p.Z)({},f),e))};(0,a.useImperativeHandle)(t,(function(){return{openForm:function(e){o(!0),m(e?(0,p.Z)({},e):{})}}}));var D=function(){S(!0),Xe.typeSave((0,p.Z)((0,p.Z)({},f),{},{type:i})).then((function(e){B.ZP.success(e.message),w((0,p.Z)({},e.data)),n(),o(!1)})).catch((function(e){if("object"===typeof e.message){var t=e.message[Object.keys(e.message)[0]];B.ZP.error(t)}else B.ZP.error(e.message)})).finally((function(){S(!1)}))};return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(I.Z,{title:(f._id?"Edit":"Add")+" Specialization ",style:{top:20},open:s,okText:"Save",onOk:D,okButtonProps:{disabled:g},onCancel:function(){o(!1)},destroyOnClose:!0,maskClosable:!1,width:500,className:"app-modal-body",footer:[(0,u.jsx)(d.Z,{onClick:function(){o(!1)},children:"Cancel"},"cancel"),(0,u.jsx)(d.Z,{type:"primary",onClick:D,children:"Save"},"save")],children:(0,u.jsx)(k.Z,{spinning:g,indicator:(0,u.jsx)(U.Z,{style:{fontSize:24},spin:!0}),children:(0,u.jsx)(v.Z,{layout:"vertical",children:(0,u.jsx)(y.Z,{gutter:[12,2],children:(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)(v.Z.Item,{label:"Title",required:!0,children:(0,u.jsx)(C.Z,{placeholder:"Title",value:f.name,onChange:function(e){w({name:e.target.value})}})})})})})})})})}));function wt(){var e=(0,a.useState)("ocassion"),t=(0,x.Z)(e,2),n=t[0],i=t[1];return(0,u.jsx)(J.Z,{onChange:function(e){i(e)},activeKey:n,items:[{label:"Occasion",key:"ocassion",children:(0,u.jsx)(St,{type:n})},{label:"Recipient",key:"recipient",children:(0,u.jsx)(St,{type:n})},{label:"Flavour",key:"flavour",children:(0,u.jsx)(St,{type:n})},{label:"Relation",key:"relation",children:(0,u.jsx)(St,{type:n})}]})}var Dt=n(4942),Tt=n(7943),Rt=function(){function e(){(0,_.Z)(this,e)}return(0,L.Z)(e,null,[{key:"deliveryTypeDetails",value:function(e,t){return A.Z.get(this.baseURL+"/delivery-type/details/"+e,{params:t})}},{key:"deliveryTypeList",value:function(e){return A.Z.get(this.baseURL+"/delivery-type/list",{params:e})}},{key:"deliveryTypeSave",value:function(e,t){return A.Z.post(this.baseURL+"/delivery-type/save",e,{params:t})}},{key:"deliveryTypeDelete",value:function(e){return A.Z.post(this.baseURL+"/delivery-type/delete",{ids:e})}},{key:"deliveryDetails",value:function(e,t){return A.Z.get(this.baseURL+"/details/"+e,{params:t})}},{key:"deliveryList",value:function(e){return A.Z.get(this.baseURL+"/list",{params:e})}},{key:"deliverySave",value:function(e,t){return A.Z.post(this.baseURL+"/save",e,{params:t})}},{key:"deliveryDelete",value:function(e){return A.Z.post(this.baseURL+"/delete",{ids:e})}}]),e}();function Ut(){var e=(0,a.useState)([]),t=(0,x.Z)(e,2),n=t[0],i=t[1],r=(0,a.useState)(!1),l=(0,x.Z)(r,2),s=l[0],o=l[1],c=(0,a.useState)([]),h=(0,x.Z)(c,2),f=h[0],v=h[1],y=(0,a.useState)({page:1,limit:20}),b=(0,x.Z)(y,2),C=b[0],S=b[1],I=(0,a.useRef)(),k=[{title:"#",width:20,render:function(e,t,n){return(0,u.jsx)("b",{children:n+1})}},{title:"Name",dataIndex:"name",width:80},{title:"Charge",dataIndex:"charge",width:80},{title:"Status",dataIndex:"status",width:80,render:function(e){return e?(0,u.jsx)(m.Z,{color:"green",children:"Active"}):(0,u.jsx)(m.Z,{color:"red",children:"Inactive"})}},{title:"Action",dataIndex:"_id",width:70,render:function(e,t){return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(Z.Z,{title:"Are you sure to delete?. Be sure to delete the data from server.",onConfirm:function(){R(t._id)},okText:"Yes",cancelText:"No",children:[(0,u.jsx)(d.Z,{type:"primary",size:"small",danger:!0,icon:(0,u.jsx)(D.Z,{})}),"\xa0"]}),(0,u.jsx)(d.Z,{type:"primary",size:"small",icon:(0,u.jsx)(T.Z,{}),onClick:function(){I.current.openForm(t)}})]})}}].filter((function(e){return!e.hidden}));function w(){o(!0),Rt.deliveryList(C).then((function(e){var t;i(null===(t=e.data)||void 0===t?void 0:t.map((function(e){return(0,p.Z)((0,p.Z)({},e),{},{key:e._id})}))),S((0,p.Z)((0,p.Z)({},C),{},{limit:e.extra.limit,page:e.extra.page,total:e.extra.total}))})).catch((function(e){})).finally((function(){o(!1)}))}var R=function(e){Rt.deliveryDelete(e).then((function(e){E(e.message),w(),v([])})).catch((function(e){E(e.message,"error")}))},U=k.map((function(e){return(0,p.Z)((0,p.Z)({},e),{},{ellipsis:!1})}));U[0].fixed=!0,U[U.length-1].fixed="right";var _={bordered:!0,loading:s,size:"small",title:function(){return(0,u.jsx)(_t,{addNewModalRef:I,selected:f,deleteData:R,qData:C,setQData:S,list:w})},showHeader:!0,footer:function(){return(0,u.jsx)(q,{qData:C,setQData:S})},rowSelection:{onChange:function(e){v(e)}},tableLayout:void 0};return(0,a.useEffect)((function(){w()}),[C.page,C.limit]),(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(j.Z.Title,{level:5,children:"List of Delivery"}),(0,u.jsx)(g.Z,(0,p.Z)((0,p.Z)({},_),{},{pagination:{position:["none"],pageSize:C.limit},columns:U,dataSource:n.length?n:[],scroll:{y:"calc(100vh - 340px)",x:"calc(100vw - 387px)"}})),(0,u.jsx)(Lt,{ref:I,list:w})]})}function _t(e){var t=e.addNewModalRef,n=e.selected,a=e.deleteData,i=e.qData,r=(e.setQData,e.list);return(0,u.jsx)(v.Z,{onSubmitCapture:r,className:"search-form",children:(0,u.jsxs)(y.Z,{gutter:[12,2],children:[(0,u.jsx)(b.Z,{xs:{span:24},sm:{span:16},md:{span:10},lg:{span:4},children:(0,u.jsx)(v.Z.Item,{style:{marginBottom:0},children:(0,u.jsx)(C.Z,{placeholder:"Search by title",value:i.key,onChange:function(e){return t=e.target.value,i[n="key"]=t,void(void 0!==t&&""!==t||(delete i[n],r()));var t,n},allowClear:!0})})}),(0,u.jsx)(b.Z,{span:3,children:(0,u.jsx)(v.Z.Item,{style:{marginBottom:0},children:(0,u.jsx)(d.Z,{type:"primary",htmlType:"submit",children:"Search"})})}),(0,u.jsxs)(b.Z,{span:5,children:[(0,u.jsx)(v.Z.Item,{style:{marginBottom:0,float:"right"},children:(0,u.jsx)(d.Z,{type:"primary",icon:(0,u.jsx)(R.Z,{}),onClick:function(){t.current.openForm()},children:"Add New"})}),n.length?(0,u.jsx)(Z.Z,{title:"Are you sure to delete?. Be sure to delete the data from server.",onConfirm:function(){a(n)},okText:"Yes",cancelText:"No",children:(0,u.jsx)(d.Z,{type:"primary",danger:!0,style:{float:"right"},icon:(0,u.jsx)(D.Z,{}),children:"Delete Selected"})}):null]})]})})}Rt.baseURL="delivery";var Lt=(0,a.forwardRef)((function(e,t){var n=e.list,i=(0,a.useState)(!1),r=(0,x.Z)(i,2),l=r[0],s=r[1],o=(0,a.useState)({aspect:1}),c=(0,x.Z)(o,2),h=c[0],f=c[1],m=(0,a.useState)(!1),Z=(0,x.Z)(m,2),j=Z[0],g=Z[1],w=function(e){Object.entries(e).forEach((function(e){for(var t=h,n=e[0],a=e[1],i=n.split("."),r=0;r<i.length;r++)r+1===i.length?t[i[r]]=a:("undefined"===typeof t[i[r]]&&(1*parseInt(i[r+1])>=0?t[i[r]]=[]:t[i[r]]={}),t=t[i[r]])})),f((0,p.Z)({},h))};(0,a.useImperativeHandle)(t,(function(){return{openForm:function(e){s(!0),f(e?(0,p.Z)({},e):{status:!0,timings:[{startTime:"00:00:00",endTime:"00:00:00"}]})}}}));var D=function(){g(!0),Rt.deliverySave(h).then((function(e){E(e.message),w((0,p.Z)({},e.data)),n(),s(!1)})).catch((function(e){"object"===typeof e.message?E(e.message[Object.keys(e.message)[0]],"error"):E(e.message,"error")})).finally((function(){g(!1)}))};return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(I.Z,{title:(h._id?"Edit":"Add")+" Delivery",style:{top:20},open:l,okText:"Save",onOk:D,okButtonProps:{disabled:j},onCancel:function(){s(!1)},destroyOnClose:!0,maskClosable:!1,width:500,footer:[(0,u.jsx)(d.Z,{onClick:function(){s(!1)},children:"Cancel"},"cancel"),(0,u.jsx)(d.Z,{type:"primary",onClick:D,children:"Save"},"save")],children:(0,u.jsx)(k.Z,{spinning:j,indicator:(0,u.jsx)(U.Z,{style:{fontSize:24},spin:!0}),children:(0,u.jsx)(v.Z,{layout:"vertical",children:(0,u.jsxs)(y.Z,{gutter:[12,2],children:[(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)(v.Z.Item,{label:"Name",required:!0,children:(0,u.jsx)(C.Z,{placeholder:"Name",value:h.name,onChange:function(e){w({name:e.target.value})}})})}),(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)(v.Z.Item,{label:"Charge",required:!0,children:(0,u.jsx)(C.Z,{placeholder:"Charge",value:h.charge,onChange:function(e){w({charge:e.target.value})}})})}),(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)(At,{timingDetails:h.timings,parentKay:"timings",handleChange:w})}),(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)(v.Z.Item,{label:"Status",required:!0,children:(0,u.jsxs)(S.Z,{value:h.status,onChange:function(e){w({status:e})},children:[(0,u.jsx)(S.Z.Option,{value:!0,children:"Active"}),(0,u.jsx)(S.Z.Option,{value:!1,children:"Inactive"})]})})})]})})})})})}));function At(e){var t=e.timingDetails,n=e.parentKay,i=e.handleChange;return(0,a.useEffect)((function(){console.log(n,"timings"===n)}),[n]),(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(g.Z,{bordered:!0,size:"small",showHeader:!0,footer:null,tableLayout:void 0,pagination:{position:["none"]},columns:[{title:"Start Time",dataIndex:"startTime",render:function(e,t,a){return(0,u.jsx)(Tt.Z,{onChange:function(e,t){i((0,Dt.Z)({},"".concat(n,".").concat(a,".startTime"),t))},value:Y()(null===t||void 0===t?void 0:t.startTime,"HH:mm:ss")})}},{title:"End Time",dataIndex:"endTime",render:function(e,t,a){return(0,u.jsx)(Tt.Z,{onChange:function(e,t){i((0,Dt.Z)({},"".concat(n,".").concat(a,".endTime"),t))},value:Y()(null===t||void 0===t?void 0:t.endTime,"HH:mm:ss")})}},{title:"Action",dataIndex:"price",width:100,render:function(e,a,r){return(0,u.jsxs)(u.Fragment,{children:[r+1===t.length?(0,u.jsx)(d.Z,{icon:(0,u.jsx)(R.Z,{}),shape:"circle",type:"dashed",onClick:function(){i((0,Dt.Z)({},n,[].concat((0,se.Z)(t),[{startTime:"00:00:00",endTime:"00:00:00"}])))}}):null,r+1===t.length&&0!==r?(0,u.jsx)(d.Z,{icon:(0,u.jsx)(Ge.Z,{}),shape:"circle",type:"dashed",className:"mx-2",danger:!0,onClick:function(){t.pop(),i((0,se.Z)(t),n)}}):null]})}}],dataSource:null!==t&&void 0!==t&&t.length?t:[]})})}function Ft(){var e=(0,a.useState)(),t=(0,x.Z)(e,2),n=t[0],i=t[1],r=(0,a.useState)([]),l=(0,x.Z)(r,2),s=l[0],o=l[1];return(0,a.useEffect)((function(){re.list().then((function(e){var t;o(e.data||[]),i(null===(t=e.data[0])||void 0===t?void 0:t._id)}))}),[]),(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(J.Z,{onChange:function(e){i(e)},activeKey:n,destroyInactiveTabPane:!0,items:s.map((function(e){return{label:e.name,key:e._id,productSpecialization:e.specialization,children:(0,u.jsx)($e,{productSpecialization:e.specialization,categoryId:e._id})}}))})})}var Ot=function(){function e(){(0,_.Z)(this,e)}return(0,L.Z)(e,null,[{key:"list",value:function(e){return A.Z.get(this.baseURL+"/list",{params:e})}},{key:"save",value:function(e,t){return A.Z.post(this.baseURL+"/save",e,{params:t})}},{key:"delete",value:function(e){return A.Z.post(this.baseURL+"/delete",{ids:e})}}]),e}();Ot.baseURL="settings";var Nt=[{type:"gst",title:"GST Percent",dataInput:"input",default:"0",iseditable:!1},{type:"referralAmount",title:"Referral Amount",dataInput:"input",default:"0",iseditable:!1},{type:"phone",title:"Phone Number(Support)",dataInput:"input",default:"xxxxxxxxxx",iseditable:!1},{type:"email",title:"email (Support)",dataInput:"input",default:"xxx....@test.com",iseditable:!1},{type:"whatsapp",title:"Whatsapp (Support)",dataInput:"input",default:"xxxxxxxxxx",iseditable:!1}],qt=function(){var e=(0,a.useState)(Nt.map((function(e){return{type:e.type}}))),t=(0,x.Z)(e,2),n=t[0],i=t[1],r=(0,a.useState)(Nt),s=(0,x.Z)(r,2),o=s[0],c=s[1],h=(0,a.useState)({page:1,limit:20}),f=(0,x.Z)(h,2),m=f[0],Z=(f[1],(0,a.useState)(!1)),j=(0,x.Z)(Z,2),g=j[0],v=j[1],S=function(){v(!0),Ot.list(m).then((function(e){i(null===Nt||void 0===Nt?void 0:Nt.map((function(t){var n;return(null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.find((function(e){return e.type===t.type})))||{type:t.type,value:t.default}})))})).catch((function(e){})).finally((function(){v(!1)}))};(0,a.useEffect)((function(){S()}),[]);return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(k.Z,{spinning:g,indicator:(0,u.jsx)(U.Z,{style:{fontSize:24},spin:!0}),children:(0,u.jsx)(y.Z,{gutter:[12,12],children:null===o||void 0===o?void 0:o.map((function(e,t){var a;return(0,u.jsx)(b.Z,{span:6,children:(0,u.jsx)(l.Z,{title:e.title,size:"small",extra:e.iseditable?(0,u.jsxs)(y.Z,{gutter:6,children:[(0,u.jsx)(b.Z,{children:(0,u.jsx)(d.Z,{type:"primary",size:"small",danger:!0,onClick:function(){return c(o.map((function(e,n){return t!==n?(0,p.Z)({},e):(0,p.Z)((0,p.Z)({},e),{},{iseditable:!1})})))},children:" Cancel "})}),(0,u.jsx)(b.Z,{children:(0,u.jsx)(d.Z,{type:"primary",size:"small",onClick:function(){!function(e){v(!0),Ot.save(e).then((function(t){E(t.message),c(o.map((function(t,n){return e.type!==t.type?(0,p.Z)({},t):(0,p.Z)((0,p.Z)({},t),{},{iseditable:!1})}))),S()})).catch((function(e){"object"===typeof e.message?E(e.message[Object.keys(e.message)[0]],"error"):E(e.message,"error")})).finally((function(){v(!1)}))}(null===n||void 0===n?void 0:n.find((function(t,n){return t.type===e.type})))},children:" Save "})})]}):(0,u.jsx)(d.Z,{type:"primary",size:"small",onClick:function(){return c(o.map((function(e,n){return t!==n?(0,p.Z)({},e):(0,p.Z)((0,p.Z)({},e),{},{iseditable:!0})})))},children:" Edit "}),children:"input"===e.dataInput?(0,u.jsx)(C.Z,{value:null===n||void 0===n||null===(a=n.find((function(t,n){return t.type===e.type})))||void 0===a?void 0:a.value,onChange:function(t){i(n.map((function(n,a){return n.type===e.type?(0,p.Z)((0,p.Z)({},n),{},{value:t.target.value}):(0,p.Z)({},n)})))},disabled:!e.iseditable}):null})},t)}))})})})};function Pt(){return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(i.Z,{style:{minHeight:"100vh"},children:(0,u.jsxs)(i.Z,{className:"site-layout",children:[(0,u.jsx)(i.Z.Header,{style:{padding:0,height:"auto"},children:(0,u.jsx)(r.Z,{theme:"dark",mode:"horizontal",items:[{label:(0,u.jsx)(s.rU,{to:"/specialization",children:"Specialization  "}),key:"specialization"},{label:(0,u.jsx)(s.rU,{to:"/offer",children:"Offers  "}),key:"offer"},{label:(0,u.jsx)(s.rU,{to:"/coupon",children:"Coupon"}),key:"coupon"},{label:(0,u.jsx)(s.rU,{to:"/banner",children:"Banner"}),key:"banner"},{label:(0,u.jsx)(s.rU,{to:"/order",children:"Order"}),key:"order"},{label:(0,u.jsx)(s.rU,{to:"/addOn",children:"AddOn"}),key:"addOn"},{label:(0,u.jsx)(s.rU,{to:"/category",children:"Category"}),key:"category"},{label:(0,u.jsx)(s.rU,{to:"/application",children:"Application"}),key:"application"},{label:(0,u.jsx)(s.rU,{to:"/delivery",children:"Delivery"}),key:"delivery"},{label:(0,u.jsx)(s.rU,{to:"/settings",children:"Settings"}),key:"settings"},{label:(0,u.jsx)(s.rU,{to:"/products",children:"Products"}),key:"products"},{label:(0,u.jsx)(s.rU,{to:"/homepageitems",children:"Home Page Items"}),key:"homePageItems"},{label:(0,u.jsx)(s.rU,{to:"/management",children:"User Management"}),key:"management"},{label:null!==f.Z&&void 0!==f.Z&&f.Z.name?f.Z.name:"You",key:"profile",children:[{key:"Profile",label:"Profile"},{key:"Logout",danger:!0,label:"Logout",onClick:function(){window.localStorage.clear(),window.location.reload()}}]}]})}),(0,u.jsx)(i.Z.Content,{children:(0,u.jsx)(l.Z,{style:{borderRadius:"none"},children:(0,u.jsxs)(o.Z5,{children:[(0,u.jsx)(o.AW,{path:"specialization",element:(0,u.jsx)(wt,{}),children:"    "}),(0,u.jsx)(o.AW,{path:"offer",element:(0,u.jsx)(it,{}),children:"  "}),(0,u.jsx)(o.AW,{path:"coupon",element:(0,u.jsx)(Q,{}),children:" "}),(0,u.jsx)(o.AW,{path:"banner",element:(0,u.jsx)(ge,{})}),(0,u.jsx)(o.AW,{path:"application",element:(0,u.jsx)($,{})}),(0,u.jsx)(o.AW,{path:"category",element:(0,u.jsx)(pe,{})}),(0,u.jsx)(o.AW,{path:"management",element:(0,u.jsx)(Me,{})}),(0,u.jsx)(o.AW,{path:"homepageitems",element:(0,u.jsx)(ft,{})}),(0,u.jsx)(o.AW,{path:"add-new-product",element:(0,u.jsx)($e,{})}),(0,u.jsx)(o.AW,{path:"addOn",element:(0,u.jsx)(st,{})}),(0,u.jsx)(o.AW,{path:"order",element:(0,u.jsx)(yt,{})}),(0,u.jsx)(o.AW,{path:"products",element:(0,u.jsx)(Ft,{})}),(0,u.jsx)(o.AW,{path:"delivery",element:(0,u.jsx)(Ut,{})}),(0,u.jsx)(o.AW,{path:"settings",element:(0,u.jsx)(qt,{})}),(0,u.jsx)(o.AW,{path:"*",element:(0,u.jsx)(h,{})})]})})})]})})})}}}]);
//# sourceMappingURL=994.9d8cc4e0.chunk.js.map